import{o as w,r as s,j as e,H as y,B as c,T as C,L as B,E as k}from"./index-jC3NHVOB.js";import{S as E,P as Y,K as D,a as I}from"./pagination-CitbjIaw.js";import{A as P,T as L,a as $,I as z,b as A,L as F}from"./ArrowBack-BiJ42Phl.js";import{S,j as G,C as H,f as K}from"./ChessDataService-CyWxNuZl.js";import{Y as R}from"./filters-CbePbyuE.js";import{T as N,a as O,b as V,c as u,d as r,e as q}from"./TableRow-Dm8F9iRI.js";const d=R.map(x=>S.encode(x.toString())),Z=()=>{const[x]=w(),[h,b]=s.useState(()=>x.get("id")||d[0]),[j,m]=s.useState(null),[i,v]=s.useState({}),[p,f]=s.useState(!1),[t,g]=s.useState(null),o=G();return s.useEffect(()=>{let n=h,a=`${n}`;i[a]?(m(i[a].name),g(null),o.navigateToYear(n,!0)):(f(!0),m(null),g(null),H.getYear(n).then(l=>{m(l.name),v(T=>({...T,[`${a}`]:l}))}).catch(()=>g("Failed to fetch year data")).finally(()=>{f(!1),o.navigateToYear(n,!0)}))},[h]),e.jsxs(e.Fragment,{children:[e.jsxs(y,{children:[j&&e.jsx("title",{children:`${j} - Chess Champions`}),p||t?e.jsx("meta",{name:"robots",content:"noindex"}):e.jsx("meta",{name:"robots",content:"index, follow"})]}),e.jsxs(c,{display:"flex",flexDirection:"column",height:"100vh",children:[e.jsx(P,{position:"static",color:"default",children:e.jsxs(L,{children:[e.jsx($,{title:"Back",children:e.jsx(z,{edge:"start",color:"inherit",onClick:()=>o.navigateBack(),"aria-label":"back",children:e.jsx(A,{})})}),e.jsx(C,{variant:"h6",component:"h1",children:j})]})}),e.jsx(c,{display:"flex",flexGrow:1,overflow:"hidden",padding:{xs:2,md:2},children:e.jsx(E,{direction:"horizontal",initialSlide:d.indexOf(h),loop:!0,spaceBetween:10,slidesPerView:1,pagination:{clickable:!0},keyboard:{enabled:!0},onSlideChangeTransitionEnd:n=>{const a=d[n.realIndex];b(a)},modules:[Y,D],children:d.map(n=>e.jsx(I,{children:e.jsx(c,{display:"flex",flexDirection:"column",sx:{overflow:"hidden",height:"100%"},children:e.jsxs(c,{display:"flex",flexDirection:"column",flexGrow:"grow",marginBottom:4,sx:{overflow:"auto",height:"100%"},children:[p&&e.jsx(B,{}),t&&e.jsx(k,{message:t}),!p&&!t&&i[`${n}`]&&e.jsx(N,{component:K,children:e.jsxs(O,{children:[e.jsx(V,{children:e.jsxs(u,{children:[e.jsx(r,{}),e.jsx(r,{align:"center",children:"Gold"}),e.jsx(r,{align:"center",children:"Silver"}),e.jsx(r,{align:"center",children:"Bronze"}),e.jsx(r,{align:"center",children:"Total"})]})}),e.jsx(q,{children:i[`${n}`].results.map(a=>e.jsxs(u,{children:[e.jsx(r,{children:e.jsx(F,{onClick:l=>{l.preventDefault(),o.navigateToFederation(S.encode(a.fed))},rel:"noopener",style:{cursor:"pointer"},children:a.fed})}),e.jsx(r,{align:"center",children:a.gold||0}),e.jsx(r,{align:"center",children:a.silver||0}),e.jsx(r,{align:"center",children:a.bronze||0}),e.jsx(r,{align:"center",children:(a.gold||0)+(a.silver||0)+(a.bronze||0)})]},a.fed))})]})})]})})},n))})})]})]})};export{Z as default};
