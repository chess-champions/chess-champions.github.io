import{o as v,r as o,j as e,H as l,E as B,L as S,B as n,T as a}from"./index-CcDEah1p.js";import{A as C,T as E,a as k,I as w,b as $,L as j}from"./ArrowBack-CrkFOApj.js";import{j as T,C as D,k as c,S as F,l as x,m as f}from"./ChessDataService-DJTw6fGV.js";const A=()=>{const[m]=v(),t=m.get("id"),[s,g]=o.useState(null),[p,b]=o.useState(!0),[h,y]=o.useState(null),d=T();return o.useEffect(()=>{t&&D.getPlayer(t).then(i=>{g(i)}).catch(()=>y("Failed to fetch player data")).finally(()=>b(!1))},[]),!t||h?e.jsxs(e.Fragment,{children:[e.jsx(l,{children:e.jsx("meta",{name:"robots",content:"noindex"})}),e.jsx(B,{message:h||"Player id is missing."})]}):p?e.jsxs(e.Fragment,{children:[e.jsx(l,{children:e.jsx("meta",{name:"robots",content:"noindex"})}),e.jsx(S,{})]}):e.jsxs(e.Fragment,{children:[e.jsxs(l,{children:[(s==null?void 0:s.name)&&e.jsx("title",{children:`${s==null?void 0:s.name} - Chess Champions`}),e.jsx("meta",{name:"robots",content:"index, follow"})]}),e.jsxs(n,{display:"flex",flexDirection:"column",height:"100vh",children:[e.jsx(C,{position:"static",color:(s==null?void 0:s.gender)===null?"default":(s==null?void 0:s.gender)===c.Open?"primary":"secondary",children:e.jsxs(E,{children:[e.jsx(k,{title:"Back",children:e.jsx(w,{edge:"start",color:"inherit",onClick:()=>d.navigateBack(),"aria-label":"back",children:e.jsx($,{})})}),e.jsx(a,{variant:"h6",children:s==null?void 0:s.name})]})}),e.jsx(n,{overflow:"auto",padding:{xs:2,md:2},children:e.jsxs(n,{display:"flex",flexDirection:"column",gap:{xs:1,md:2},children:[e.jsxs(n,{display:"grid",children:[(s==null?void 0:s.id)&&(s==null?void 0:s.fideName)&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsx(a,{variant:"body1",children:"FIDE Id:"})}),e.jsx(n,{flexBasis:"50%",children:e.jsx(j,{href:`https://ratings.fide.com/profile/${s.id}`,variant:"body1",target:"_blank",rel:"noopener",children:s.id})})]}),(s==null?void 0:s.fed)&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsx(a,{variant:"body1",children:"Federation:"})}),e.jsx(n,{flexBasis:"50%",children:e.jsx(j,{onClick:i=>{i.preventDefault(),d.navigateToFederation(F.encode(s.fed))},rel:"noopener",style:{cursor:"pointer"},children:s.fed})})]}),(s==null?void 0:s.yob)&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsx(a,{variant:"body1",children:"Year of Birth:"})}),e.jsxs(n,{display:"flex",flexBasis:"50%",gap:1,children:[e.jsx(a,{variant:"body1",children:s.yob}),e.jsx(a,{variant:"body1",color:"textSecondary",children:`(${new Date().getFullYear()-s.yob} yrs.)`})]})]})]}),[...new Set(s==null?void 0:s.results.map(i=>i.rank))].map(i=>e.jsxs(n,{display:"flex",padding:2,gap:1,border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(63, 81, 181, 0.3)",bgcolor:i<=3?"white":"",children:[e.jsx(n,{flexGrow:"auto",children:e.jsxs(a,{variant:"body1",children:[i,"."]})}),e.jsx(n,{flex:1,children:s==null?void 0:s.results.filter(r=>r.rank===i).map((r,u)=>e.jsxs(n,{display:"flex",flexDirection:"row",onClick:()=>d.navigateToTournament(r.year,x[r.category],f[r.type],c[r.gender]),sx:{cursor:"pointer","&:hover":{backgroundColor:"#f9f9f9"},borderRadius:"4px"},children:[e.jsx(n,{flexGrow:1,children:e.jsx(a,{variant:"body1",sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:`${c[r.gender]}${r.category!==x.All?` ${x[r.category]}`:""} ${f[r.type]} ${r.year}`})}),e.jsx(n,{children:e.jsx(a,{variant:"body2",color:"textSecondary",children:`${s.yob?` ${r.year-s.yob} yrs.`:""}`})})]},u))})]},i))]})})]})]})};export{A as default};
