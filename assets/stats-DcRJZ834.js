import{j as e,B as f,R as p,l as h,m as c,w as m}from"./about-hFlrwFyx.js";import{S as j,s as b,t as w,b as u,H as y,F as _,u as x,v as $,p as R,n as S,a as F,d as v}from"./clubs-CU-CC0Bm.js";import{R as l,u as L,M as D}from"./results-D8gN9qSP.js";var a=(s=>(s[s.feds=0]="feds",s[s.clubs=1]="clubs",s[s.coaches=2]="coaches",s[s.players=3]="players",s))(a||{});const T="/",A={async getStats(s,i){const r=j.encode(i.toString()),t=await fetch(`${T}api/stats/${a[s]}/${r}.json?v=7af38cf`);if(!t.ok)throw new Error(`Failed to get year (${i}) stats`);return await t.json()}};function d({group:s,year:i}){const r={[a.feds]:l.Federation,[a.clubs]:l.Club,[a.coaches]:l.Coach,[a.players]:l.Player},{data:t,isLoading:o,error:n}=L({queryKey:["stats",{group:s,year:i}],queryFn:async()=>await A.getStats(s,i)});return e.jsxs(f,{display:"flex",flexDirection:"column",flexGrow:"grow",sx:{overflow:"auto",width:"100%",height:"100%"},children:[o&&e.jsx(b,{}),n&&e.jsx(w,{message:n.message}),!o&&!n&&t&&e.jsx(D,{filterField:l.Year,filterId:i,groupField:r[s],results:t.results})]})}function O({group:s,setGroup:i,year:r}){const{t}=u();return e.jsxs(f,{display:"flex",flexDirection:"column",padding:2,gap:1,boxSizing:"border-box",children:[e.jsx(y,{title:`${r} ${t("medals_table")}`}),e.jsxs(h,{value:s,onChange:(o,n)=>i(n),children:[e.jsx(c,{label:t(`stats_group_enum.${a.feds}`),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),e.jsx(c,{label:t(`stats_group_enum.${a.clubs}`),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),e.jsx(c,{label:t(`stats_group_enum.${a.coaches}`),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),e.jsx(c,{label:t(`stats_group_enum.${a.players}`),sx:{minWidth:0,paddingRight:0,paddingLeft:0}})]}),e.jsxs(f,{display:"flex",flexGrow:1,children:[s===a.feds&&e.jsx(d,{group:a.feds,year:r}),s===a.clubs&&e.jsx(d,{group:a.clubs,year:r}),s===a.coaches&&e.jsx(d,{group:a.coaches,year:r}),s===a.players&&e.jsx(d,{group:a.players,year:r})]}),e.jsx(_,{})]})}const C=p.memo(O),M=m(function(){const[i,r]=x("group",$(a).withDefault(a.feds).withOptions({clearOnDefault:!1})),[t,o]=x("year",R.withDefault(S).withOptions({clearOnDefault:!1})),{getStatsUrl:n}=F(),{t:g}=u();return e.jsxs(e.Fragment,{children:[e.jsx(v,{title:`${t} - ${g("medals_table")} - ${g(`stats_group_enum.${i}`)}`,description:g("year_description",{year:t}),url:n(t,!1)}),e.jsx(C,{group:i,setGroup:r,year:t,setYear:o})]})});export{M as S};
