import{o as T,r as t,j as e,H as w,B as d,T as y,L as B,E as k}from"./index-RD94NESF.js";import{S as E,P as C,K as D,a as I}from"./pagination-BQZAO1Ij.js";import{A as Y,T as P,a as L,I as z,b as A,L as F}from"./ArrowBack-ayEDUfuv.js";import{S as u,j as G,C as H,f as R}from"./ChessDataService-DOsUmPpk.js";import{Y as K}from"./filters-CMm1FCJ3.js";import{T as N,a as O,b as V,c as p,d as r,e as q}from"./TableRow-C4ONB-KG.js";const x=K.map(h=>u.encode(h.toString())),Z=()=>{var f;const[h]=T(),[s,b]=t.useState(()=>h.get("id")||x[0]),[i,S]=t.useState({}),[j,m]=t.useState(!1),[l,g]=t.useState(null),c=G();return t.useEffect(()=>{let a=s;i[a]?(g(null),c.navigateToYear(a,!0)):(m(!0),g(null),H.getYear(a).then(o=>{S(n=>({...n,[a]:o}))}).catch(()=>g("Failed to fetch year data")).finally(()=>{m(!1),c.navigateToYear(a,!0)}))},[s]),e.jsxs(e.Fragment,{children:[e.jsxs(w,{children:[i[s]&&e.jsx("title",{children:i[s].name}),j||l?e.jsx("meta",{name:"robots",content:"noindex"}):e.jsx("meta",{name:"robots",content:"index, follow"})]}),e.jsxs(d,{display:"flex",flexDirection:"column",height:"100vh",children:[e.jsx(Y,{position:"static",color:"default",children:e.jsxs(P,{children:[e.jsx(L,{title:"Back",children:e.jsx(z,{edge:"start",color:"inherit",onClick:()=>c.navigateBack(),"aria-label":"back",children:e.jsx(A,{})})}),e.jsx(y,{variant:"h6",component:"h1",children:(f=i[s])==null?void 0:f.name})]})}),e.jsx(d,{display:"flex",flexGrow:1,overflow:"auto",padding:{xs:2,md:2},children:e.jsx(E,{direction:"horizontal",initialSlide:x.indexOf(s),loop:!0,spaceBetween:10,slidesPerView:1,pagination:{clickable:!0},keyboard:{enabled:!0},onSlideChangeTransitionEnd:a=>{const o=x[a.realIndex];b(o)},modules:[C,D],children:x.map(a=>{var o;return e.jsx(I,{children:e.jsx(d,{display:"flex",flexDirection:"column",sx:{overflow:"hidden",height:"100%"},children:e.jsxs(d,{display:"flex",flexDirection:"column",flexGrow:"grow",marginBottom:4,sx:{overflow:"auto",height:"100%"},children:[j&&e.jsx(B,{}),l&&e.jsx(k,{message:l}),!j&&!l&&i[a]&&e.jsx(N,{component:R,children:e.jsxs(O,{children:[e.jsx(V,{children:e.jsxs(p,{children:[e.jsx(r,{}),e.jsx(r,{align:"center",children:"Gold"}),e.jsx(r,{align:"center",children:"Silver"}),e.jsx(r,{align:"center",children:"Bronze"}),e.jsx(r,{align:"center",children:"Total"})]})}),e.jsx(q,{children:(o=i[a].results)==null?void 0:o.map(n=>e.jsxs(p,{children:[e.jsx(r,{children:e.jsx(F,{onClick:v=>{v.preventDefault(),c.navigateToFederation(u.encode(n.fed))},rel:"noopener",style:{cursor:"pointer"},children:n.fed})}),e.jsx(r,{align:"center",children:n.gold||0}),e.jsx(r,{align:"center",children:n.silver||0}),e.jsx(r,{align:"center",children:n.bronze||0}),e.jsx(r,{align:"center",children:(n.gold||0)+(n.silver||0)+(n.bronze||0)})]},n.fed))})]})})]})})},a)})})})]})]})};export{Z as default};
