import{j as e,B as n,T as c,L as C,a as F,b as m}from"./mui-CXhE_iE7.js";import{a as j,r as l}from"./react-Bs57X6Ch.js";import{S,u as y,p as b,a as _,H as k,R as w,F as R,b as $,E as g,L as B,c as E}from"./shared-C80fr-de.js";import{u as T}from"./query-DeXAFL7x.js";import{M as p,R as h}from"./results-8Z4yPFax.js";import{u as v}from"./localization-BTb5j_W4.js";import"./analytics-HyNrjKFN.js";import"./utils-BT3gc4jm.js";const M="/",D={async get(s){const i=S.encode(s.toString()),o=await fetch(`${M}api/coaches/${i}.json?v=fe6cdec`);if(!o.ok)throw new Error(`Failed to get coach (id=${s}) data`);return await o.json()}},I=({data:s})=>{const[i,o]=y("tab",b.withDefault(0)),{getFederationUrl:d}=_(),{t:r,i18n:x}=v(),a=l.useMemo(()=>(x.resolvedLanguage==="uk"?s?.name_uk:s?.name_en)||s?.name_uk||s?.name_en||"",[s,x.resolvedLanguage]),t=l.useMemo(()=>r("coach_title",{name:a}),[r,a]),u=l.useCallback((f,L)=>{o(L)},[o]);return e.jsxs(n,{display:"flex",flexDirection:"column",padding:2,gap:1,boxSizing:"border-box",minHeight:"100vh",children:[e.jsx(k,{title:t}),e.jsxs(n,{display:"flex",sx:{flexDirection:{xs:"column",md:"row"},gap:4},children:[s.photo&&e.jsx(n,{display:"flex",justifyContent:"center",children:e.jsx(n,{component:"img",src:s.photo,alt:a,sx:{width:150,height:150,objectFit:"cover",borderRadius:"50%",boxShadow:2}})}),e.jsxs(n,{display:"flex",flexDirection:"column",flex:1,children:[s.id&&s.id>0&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(c,{variant:"body1",children:[r("fide"),":"]})}),e.jsx(n,{flexBasis:"50%",children:e.jsx(C,{href:`https://ratings.fide.com/profile/${s.id}`,variant:"body1",target:"_blank",rel:"noopener",children:s.id})})]}),s.yob&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(c,{variant:"body1",children:[r("year_of_birth"),":"]})}),e.jsxs(n,{display:"flex",flexBasis:"50%",gap:1,children:[e.jsx(c,{variant:"body1",children:s.yob}),e.jsx(c,{variant:"body1",color:"textSecondary",children:`(${new Date().getFullYear()-s.yob} ${r("years")})`})]})]}),s.fed&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(c,{variant:"body1",children:[r("federation"),":"]})}),e.jsx(n,{flexBasis:"50%",children:e.jsx(w,{to:d(s.fed),children:r(`federation_enum_short.${s.fed}`)})})]})]})]}),e.jsxs(F,{value:i,onChange:u,children:[e.jsx(m,{label:r("results"),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),e.jsx(m,{label:r("player",{count:2}),sx:{minWidth:0,paddingRight:0,paddingLeft:0}})]}),e.jsxs(n,{display:"flex",flexGrow:1,children:[i===0&&e.jsx(p,{filterField:h.Coach,filterId:s.id,groupField:h.Year,results:s.years}),i===1&&e.jsx(p,{filterField:h.Coach,filterId:s.id,groupField:h.Player,results:s.players})]}),e.jsx(R,{})]})},H=j.memo(I),U=({id:s})=>{const{getCoachUrl:i}=_(),{t:o,i18n:d}=v(),{data:r,isLoading:x,error:a}=T({queryKey:["coaches",{id:s}],queryFn:async()=>await D.get(s),enabled:!!s}),t=l.useMemo(()=>(d.resolvedLanguage==="uk"?r?.name_uk:r?.name_en)||r?.name_uk||r?.name_en||"",[r,d.resolvedLanguage]),u=l.useMemo(()=>o("coach_title",{name:t}),[o,t]),f=l.useMemo(()=>o("coach_description",{name:t}),[o,t]);if(!s)return e.jsxs(e.Fragment,{children:[e.jsx($,{}),e.jsx(g,{message:"Coach id is missing."})]});if(a)return e.jsx(g,{message:a.message});if(x)return e.jsx(B,{});if(r)return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:u,description:f,url:i(s,!1)}),e.jsx(H,{data:r})]})},q=j.memo(U),z=()=>{const[s]=y("id",b);return e.jsx(q,{id:s})};export{z as CoachPage};
