const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/progress-B-wc8jOj.js","assets/mui-CXhE_iE7.js","assets/react-Bs57X6Ch.js","assets/shared-BDhNpTPp.js","assets/localization-BTb5j_W4.js","assets/analytics-HyNrjKFN.js","assets/utils-BT3gc4jm.js","assets/charts-CZXdVTiO.js"])))=>i.map(i=>d[i]);
import{u,_ as D}from"./localization-BTb5j_W4.js";import{j as e,B as n,T as a,L,D as B,a as F,b as v}from"./mui-CXhE_iE7.js";import{a as b,s as y,R as m,T as E,S as P,u as _,p as $,b as S,E as w,L as T,c as R,H as C,F as N}from"./shared-BDhNpTPp.js";import{a as U,L as k,r as p}from"./react-Bs57X6Ch.js";import{u as z}from"./query-DeXAFL7x.js";import"./analytics-HyNrjKFN.js";import"./utils-BT3gc4jm.js";const A=({data:s})=>{const{getFederationUrl:c,getClubUrl:l,getCoachUrl:x}=b(),{t:o}=u();return e.jsxs(n,{display:"flex",sx:{flexDirection:{xs:"column",md:"row"},gap:4},children:[s.photo&&e.jsx(n,{display:"flex",justifyContent:"center",children:e.jsx(n,{component:"img",src:s.photo,alt:y(s),sx:{width:150,height:150,objectFit:"cover",borderRadius:"50%",boxShadow:2}})}),e.jsxs(n,{display:"flex",flexDirection:"column",flex:1,children:[s.id&&s.id>0&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(a,{variant:"body1",children:[o("fide"),":"]})}),e.jsx(n,{flexBasis:"50%",children:e.jsx(L,{href:`https://ratings.fide.com/profile/${s.id}`,variant:"body1",target:"_blank",rel:"noopener",children:s.id})})]}),s.yob&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(a,{variant:"body1",children:[o("year_of_birth"),":"]})}),e.jsxs(n,{display:"flex",flexBasis:"50%",gap:1,children:[e.jsx(a,{variant:"body1",children:s.yob}),e.jsx(a,{variant:"body1",color:"textSecondary",children:`(${new Date().getFullYear()-s.yob} ${o("years")})`})]})]}),s.fed&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(a,{variant:"body1",children:[o("federation"),":"]})}),e.jsxs(n,{display:"flex",flexBasis:"50%",gap:1,children:[e.jsx(m,{to:c(s.fed),children:o(`federation_enum_short.${s.fed}`)}),s.fed2&&e.jsxs(e.Fragment,{children:[e.jsx(a,{variant:"body1",color:"textSecondary",children:"/"}),e.jsx(a,{variant:"body1",color:"textSecondary",children:y(s.fed2)})]})]})]}),s.clubs&&s.clubs.length>0&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(a,{variant:"body1",children:[o("club",{count:s.clubs.length}),":"]})}),e.jsx(n,{flexBasis:"50%",display:"flex",flexDirection:"column",children:s.clubs.map((i,r)=>{const t=y(i);return i.id?e.jsx(n,{alignSelf:"flex-start",children:e.jsx(m,{to:l(Number(i.id)),children:t})},r):e.jsx(a,{variant:"body1",children:t},r)})})]}),s.coaches&&s.coaches.length>0&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(a,{variant:"body1",children:[o("coach",{count:s.coaches.length}),":"]})}),e.jsx(n,{flexBasis:"50%",display:"flex",flexDirection:"column",children:s.coaches.map((i,r)=>{const t=y(i);return i.id?e.jsx(n,{alignSelf:"flex-start",children:e.jsx(m,{to:x(Number(i.id)),children:t})},r):e.jsx(a,{variant:"body1",children:t},r)})})]})]})]})},G=({results:s,yob:c})=>{const{t:l}=u(),{getTournamentUrl:x}=b(),o=(i,r,t,d,h)=>{const f=l(`type_enum_short.${i}`),j=l(`game_enum_short.${d}`),g=l(`gender_category.${h}.${t}`);return g?`${f} ${r} ${j} - ${g}`:`${f} ${r} ${j}`};return e.jsx(e.Fragment,{children:[...new Set(s.map(i=>i.rank))].map(i=>e.jsxs(n,{display:"flex",padding:2,gap:1,border:"1px solid #ddd",boxShadow:"0px 4px 6px rgba(63, 81, 181, 0.3)",bgcolor:i===1?"#ffffff":i===2?"#fcfcfc":i===3?"#f7f7f7":i===4?"#ededed":i===5?"#e5e5e5":"transparent",children:[e.jsx(n,{flexGrow:"auto",children:e.jsxs(a,{variant:"body1",children:[i,"."]})}),e.jsx(n,{flex:1,children:s.filter(r=>r.rank===i).map((r,t,d)=>e.jsxs(U.Fragment,{children:[e.jsx(k,{to:x(r.year,r.category,r.game,r.gender),style:{textDecoration:"none",color:"inherit"},children:e.jsxs(n,{display:"flex",flexDirection:"row",gap:1,sx:{"&:hover":{backgroundColor:"#f9f9f9"},borderRadius:"4px"},children:[e.jsx(n,{flexGrow:1,children:e.jsx(a,{variant:"body1",sx:{"&:hover":{textDecoration:"underline"}},color:r.type==E.UC?"textPrimary":"primary",children:o(r.type,r.year,r.category,r.game,r.gender)},"title")}),e.jsx(n,{children:e.jsx(a,{variant:"body1",color:"textSecondary",sx:{whiteSpace:"nowrap"},children:`${c?` ${r.year-c} ${l("years")}`:""}`},"year")})]})}),t<d.length-1&&e.jsx(B,{sx:{my:1}})]},t))})]},i))})},H="/",I={async get(s){const c=P.encode(s.toString()),l=await fetch(`${H}api/players/${c}.json?v=08c4a5d`);if(!l.ok)throw new Error(`Failed to get player (id=${s}) data`);return await l.json()}},O=p.lazy(()=>D(()=>import("./progress-B-wc8jOj.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),J=()=>{const[s]=_("id",$),[c,l]=_("tab",$.withDefault(0)),{getPlayerUrl:x}=b(),{t:o,i18n:i}=u(),{data:r,isLoading:t,error:d}=z({queryKey:["players",{id:s}],queryFn:async()=>await I.get(s),enabled:!!s}),h=p.useMemo(()=>(i.resolvedLanguage==="uk"?r?.name_uk:r?.name_en)||r?.name_uk||r?.name_en||"",[r,i.resolvedLanguage]),f=p.useCallback((j,g)=>{l(g)},[l]);if(!s)return e.jsxs(e.Fragment,{children:[e.jsx(S,{}),e.jsx(w,{message:"Player id is missing."})]});if(d)return e.jsxs(e.Fragment,{children:[e.jsx(S,{}),e.jsx(w,{message:d.message})]});if(t)return e.jsx(T,{});if(r)return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:h,description:o("player_description"),url:x(s,!1)}),e.jsxs(n,{display:"flex",flexDirection:"column",padding:2,gap:1,boxSizing:"border-box",minHeight:"100vh",children:[e.jsx(C,{title:h}),e.jsx(A,{data:r}),e.jsxs(F,{value:c,onChange:f,children:[e.jsx(v,{label:o("results"),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),e.jsx(v,{label:o("progress"),sx:{minWidth:0,paddingRight:0,paddingLeft:0}})]}),e.jsxs(n,{display:"flex",flexDirection:"column",flexGrow:1,gap:1,children:[c===0&&e.jsx(G,{results:r.results,yob:r.yob}),c===1&&e.jsx(n,{width:"100%",height:400,children:e.jsx(p.Suspense,{fallback:e.jsx(T,{height:"100%"}),children:e.jsx(O,{results:r.results,yob:r.yob})})})]}),e.jsx(N,{})]})]})};export{J as PlayerPage};
