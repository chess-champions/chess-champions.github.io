import{r as g,n as p,j as e,B as i,p as b,T as u,R as y,t as w}from"./index-BMdUcIKz.js";import{S as v,K as S,P as T,V as I,a as D}from"./swiper-react-DXxEMFRo.js";import{I as E,R as Y,H as z,F as B}from"./RouterLink-C4Iu5YNA.js";import{i as F,E as R,j as k,D as P,S as C,Y as h}from"./ChessDataService-ChDQs_76.js";import{K as $,a as K,C as A,Y as L}from"./YearFederationResultList-Dgg3Xpid.js";import{u as f}from"./useNavigationService-BH5DulFV.js";import{T as _,a as U,b as H,c as m,d as n,e as O}from"./TableRow-DosbEl-b.js";import{P as V}from"./Paper-CS0nku4h.js";import"./Divider-DqMHquL2.js";const q=({id:o})=>{var j;const[t,x]=g.useState(null),{getFederationUrl:d}=f(),{t:a}=p(),{data:r,isLoading:c,error:l}=F({queryKey:["years",{id:o}],queryFn:async()=>await k.getYear(o)});return e.jsxs(i,{display:"flex",flexDirection:"column",flexGrow:"grow",marginBottom:4,sx:{overflow:"auto",height:"100%"},children:[c&&e.jsx(b,{}),l&&e.jsx(R,{message:l.message}),!c&&!l&&r&&e.jsx(_,{component:V,children:e.jsxs(U,{size:"small",children:[e.jsx(H,{children:e.jsxs(m,{children:[e.jsx(n,{}),e.jsx(n,{align:"left",children:e.jsx(u,{children:a("federation")})}),e.jsx(n,{children:e.jsxs(i,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(i,{sx:{display:{xs:"none",sm:"block"}},children:a("gold")}),e.jsx("img",{alt:a("gold"),width:"16",height:"16",src:"/gold.svg"})]})}),e.jsx(n,{children:e.jsxs(i,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(i,{sx:{display:{xs:"none",sm:"block"}},children:a("silver")}),e.jsx("img",{alt:a("silver"),width:"16",height:"16",src:"/silver.svg"})]})}),e.jsx(n,{children:e.jsxs(i,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(i,{sx:{display:{xs:"none",sm:"block"}},children:a("bronze")}),e.jsx("img",{alt:a("bronze"),width:"16",height:"16",src:"/bronze.svg"})]})}),e.jsx(n,{children:e.jsxs(i,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(i,{sx:{display:{xs:"none",sm:"block"}},children:a("total")}),e.jsx("img",{alt:a("total"),width:"16",height:"16",src:"/total.svg"})]})})]})}),e.jsx(O,{children:(j=r.results)==null?void 0:j.map(s=>e.jsxs(y.Fragment,{children:[e.jsxs(m,{sx:{"& td":{borderBottom:"none"}},children:[e.jsx(n,{children:e.jsx(i,{display:"flex",alignItems:"center",children:e.jsx(E,{sx:{padding:"0px"},size:"small",onClick:()=>x(s.fed===t?null:s.fed),children:s.fed===t?e.jsx($,{}):e.jsx(K,{})})})}),e.jsx(n,{children:s.fed&&e.jsx(Y,{to:d(s.fed),children:a(`federation_enum_short.${s.fed}`)})}),e.jsx(n,{align:"center",children:s.gold||0}),e.jsx(n,{align:"center",children:s.silver||0}),e.jsx(n,{align:"center",children:s.bronze||0}),e.jsx(n,{align:"center",children:(s.gold||0)+(s.silver||0)+(s.bronze||0)})]}),e.jsx(m,{children:e.jsx(n,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:e.jsx(A,{in:s.fed===t,timeout:"auto",unmountOnExit:!0,children:e.jsx(i,{marginTop:1,marginBottom:2,children:e.jsx(L,{year:o,federation:s.fed})})})})})]},`${o}_${s.fed}`))})]})})]})},se=()=>{const[o]=w(),{getYearUrl:t,navigateToYear:x}=f(),{t:d}=p(),a=parseInt(o.get("id")||"")||P,[r,c]=g.useState(a);return g.useEffect(()=>{a!=r&&x(r,!0)},[r]),e.jsxs(e.Fragment,{children:[e.jsx(C,{title:`${r} - ${d("medals_table")}`,description:d("year_description",{year:r}),url:t(r,!1)}),e.jsxs(i,{display:"flex",flexDirection:"column",height:"100vh",padding:2,gap:1,boxSizing:"border-box",overflow:"hidden",children:[e.jsx(z,{title:`${r} ${d("medals_table")}`}),e.jsx(i,{display:"flex",flexGrow:1,overflow:"hidden",height:"100%",children:e.jsx(v,{direction:"horizontal",initialSlide:h.indexOf(r),loop:!0,spaceBetween:10,slidesPerView:1,style:{width:"100%",height:"100%"},pagination:{clickable:!1},keyboard:{enabled:!0},onSlideChange:l=>{c(h[l.realIndex])},virtual:{enabled:!0},modules:[S,T,I],children:h.map(l=>e.jsx(D,{"aria-hidden":r!==l,children:e.jsx(i,{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%",children:e.jsx(q,{id:l})})},l))})}),e.jsx(B,{})]})]})};export{se as default};
