const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/progress-FoyDAjTL.js","assets/about-hFlrwFyx.js","assets/clubs-BqJVHpqT.js","assets/results-B2f38uKw.js"])))=>i.map(i=>d[i]);
import{j as e,B as s,T as d,n as _,R as P,L as E,D as T,r as g,w as R,l as C,m as v}from"./about-hFlrwFyx.js";import{a as m,b,D as B,g as u,R as j,c as L,T as k,S as N,u as D,p as F,d as U,H as A,s as G,F as z}from"./clubs-BqJVHpqT.js";const H="modulepreload",O=function(r){return"/"+r},w={},W=function(h,i,y){let c=Promise.resolve();if(i&&i.length>0){let a=function(l){return Promise.all(l.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),t=n?.nonce||n?.getAttribute("nonce");c=a(i.map(l=>{if(l=O(l),l in w)return;w[l]=!0;const f=l.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":H,f||(x.as="script"),x.crossOrigin="",x.href=l,t&&x.setAttribute("nonce",t),document.head.appendChild(x),f)return new Promise((S,$)=>{x.addEventListener("load",S),x.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(n){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=n,window.dispatchEvent(t),!t.defaultPrevented)throw n}return c.then(n=>{for(const t of n||[])t.status==="rejected"&&o(t.reason);return h().catch(o)})};function q({data:r}){const{getFederationUrl:h,getClubUrl:i,getCoachUrl:y}=m(),{t:c}=b(),o=B.currentYear(),n=()=>{L.event("external_link_click",{link_type:"fide_profile",type:"player",id:r.id,name:u(r)})};return e.jsxs(s,{display:"flex",sx:{flexDirection:{xs:"column",md:"row"},gap:4},children:[r.photo&&e.jsx(s,{display:"flex",justifyContent:"center",children:e.jsx(s,{component:"img",src:r.photo,alt:u(r),sx:{width:150,height:150,objectFit:"cover",borderRadius:"50%",boxShadow:2}})}),e.jsxs(s,{display:"flex",flexDirection:"column",flex:1,children:[r.id&&r.id>0&&e.jsxs(s,{display:"flex",children:[e.jsx(s,{flexBasis:"50%",children:e.jsxs(d,{variant:"body1",children:[c("fide"),":"]})}),e.jsx(s,{flexBasis:"50%",children:e.jsx(_,{href:`https://ratings.fide.com/profile/${r.id}`,onClick:n,variant:"body1",target:"_blank",rel:"noopener",children:r.id})})]}),r.yob&&e.jsxs(s,{display:"flex",children:[e.jsx(s,{flexBasis:"50%",children:e.jsxs(d,{variant:"body1",children:[c("year_of_birth"),":"]})}),e.jsxs(s,{display:"flex",flexBasis:"50%",gap:1,children:[e.jsx(d,{variant:"body1",children:r.yob}),e.jsx(d,{variant:"body1",color:"textSecondary",children:`(${o-r.yob} ${c("years")})`})]})]}),r.fed&&e.jsxs(s,{display:"flex",children:[e.jsx(s,{flexBasis:"50%",children:e.jsxs(d,{variant:"body1",children:[c("federation"),":"]})}),e.jsxs(s,{display:"flex",flexBasis:"50%",gap:1,children:[e.jsx(j,{to:h(r.fed),children:c(`federation_enum_short.${r.fed}`)}),r.fed2&&e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"body1",color:"textSecondary",children:"/"}),e.jsx(d,{variant:"body1",color:"textSecondary",children:u(r.fed2)})]})]})]}),r.clubs&&r.clubs.length>0&&e.jsxs(s,{display:"flex",children:[e.jsx(s,{flexBasis:"50%",children:e.jsxs(d,{variant:"body1",children:[c("club",{count:r.clubs.length}),":"]})}),e.jsx(s,{flexBasis:"50%",display:"flex",flexDirection:"column",children:r.clubs.map((t,a)=>{const l=u(t);return t.id?e.jsx(s,{alignSelf:"flex-start",children:e.jsx(j,{to:i(Number(t.id)),children:l})},a):e.jsx(d,{variant:"body1",children:l},a)})})]}),r.coaches&&r.coaches.length>0&&e.jsxs(s,{display:"flex",children:[e.jsx(s,{flexBasis:"50%",children:e.jsxs(d,{variant:"body1",children:[c("coach",{count:r.coaches.length}),":"]})}),e.jsx(s,{flexBasis:"50%",display:"flex",flexDirection:"column",children:r.coaches.map((t,a)=>{const l=u(t);return t.id?e.jsx(s,{alignSelf:"flex-start",children:e.jsx(j,{to:y(Number(t.id)),children:l})},a):e.jsx(d,{variant:"body1",children:l},a)})})]})]})]})}function I({results:r,yob:h}){const{t:i}=b(),{getTournamentUrl:y}=m(),c=(o,n,t,a,l)=>{const f=i(`type_enum_short.${o}`),p=i(`game_enum_short.${a}`),x=i(`gender_category.${l}.${t}`);return x?`${f} ${n} ${p} - ${x}`:`${f} ${n} ${p}`};return e.jsx(e.Fragment,{children:[...new Set(r.map(o=>o.rank))].map(o=>e.jsxs(s,{display:"flex",padding:2,gap:1,border:"1px solid #ddd",boxShadow:"0px 4px 6px rgba(63, 81, 181, 0.3)",bgcolor:o===1?"#ffffff":o===2?"#fcfcfc":o===3?"#f7f7f7":o===4?"#ededed":o===5?"#e5e5e5":"transparent",children:[e.jsx(s,{flexGrow:"auto",children:e.jsxs(d,{variant:"body1",children:[o,"."]})}),e.jsx(s,{flex:1,children:r.filter(n=>n.rank===o).map((n,t,a)=>e.jsxs(P.Fragment,{children:[e.jsx(E,{to:y(n.year,n.category,n.game,n.gender),style:{textDecoration:"none",color:"inherit"},children:e.jsxs(s,{display:"flex",flexDirection:"row",gap:1,sx:{"&:hover":{backgroundColor:"#f9f9f9"},borderRadius:"4px"},children:[e.jsx(s,{flexGrow:1,children:e.jsx(d,{variant:"body1",sx:{"&:hover":{textDecoration:"underline"}},color:n.type==k.UC?"textPrimary":"primary",children:c(n.type,n.year,n.category,n.game,n.gender)},"title")}),e.jsx(s,{children:e.jsx(d,{variant:"body1",color:"textSecondary",sx:{whiteSpace:"nowrap"},children:`${h?` ${n.year-h} ${i("years")}`:""}`},"year")})]})}),t<a.length-1&&e.jsx(T,{sx:{my:1}})]},t))})]},o))})}const M="/",Y={async get(r){const h=N.encode(r.toString()),i=await fetch(`${M}api/players/${h}.json?v=ace81ac`);if(!i.ok)throw new Error(`Failed to get player (id=${r}) data`);return await i.json()}},K=g.lazy(()=>W(()=>import("./progress-FoyDAjTL.js"),__vite__mapDeps([0,1,2,3])));async function J({params:r}){return await Y.get(Number(r.id))}const X=R(function({params:h,loaderData:i}){const y=Number(h.id),[c,o]=D("tab",F.withDefault(0)),{getPlayerUrl:n}=m(),{t}=b(),a=g.useMemo(()=>u(i),[i]),l=g.useCallback((f,p)=>o(p),[o]);return e.jsxs(e.Fragment,{children:[e.jsx(U,{title:a,description:t("player_description"),url:n(y,!1)}),e.jsxs(s,{display:"flex",flexDirection:"column",padding:2,gap:1,boxSizing:"border-box",minHeight:"100vh",children:[e.jsx(A,{title:a}),e.jsx(q,{data:i}),e.jsxs(C,{value:c,onChange:l,children:[e.jsx(v,{label:t("results"),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),e.jsx(v,{label:t("progress"),sx:{minWidth:0,paddingRight:0,paddingLeft:0}})]}),e.jsxs(s,{display:"flex",flexDirection:"column",flexGrow:1,gap:1,children:[c===0&&e.jsx(I,{results:i.results,yob:i.yob}),c===1&&e.jsx(s,{width:"100%",height:400,children:e.jsx(g.Suspense,{fallback:e.jsx(G,{height:"100%"}),children:e.jsx(K,{results:i.results,yob:i.yob})})})]}),e.jsx(z,{})]})]})});export{X as P,J as c};
