import{j as e,B as x,R as f,l as h,m as d,w as p}from"./about-hFlrwFyx.js";import{S as m,t as b,v as j,b as u,H as w,F as y,n as _,u as $,w as R,a as S,d as F}from"./clubs-Dg7l7VMH.js";import{R as l,u as v,M as L}from"./results-CUnsB3dY.js";var a=(s=>(s[s.feds=0]="feds",s[s.clubs=1]="clubs",s[s.coaches=2]="coaches",s[s.players=3]="players",s))(a||{});const T="/",D={async getStats(s,r){const t=m.encode(r.toString()),i=await fetch(`${T}api/stats/${a[s]}/${t}.json?v=fb7ab4a`);if(!i.ok)throw new Error(`Failed to get year (${r}) stats`);return await i.json()}};function c({group:s,year:r}){const t={[a.feds]:l.Federation,[a.clubs]:l.Club,[a.coaches]:l.Coach,[a.players]:l.Player},{data:i,isLoading:o,error:n}=v({queryKey:["stats",{group:s,year:r}],queryFn:async()=>await D.getStats(s,r)});return e.jsxs(x,{display:"flex",flexDirection:"column",flexGrow:"grow",sx:{overflow:"auto",width:"100%",height:"100%"},children:[o&&e.jsx(b,{}),n&&e.jsx(j,{message:n.message}),!o&&!n&&i&&e.jsx(L,{filterField:l.Year,filterId:r,groupField:t[s],results:i.results})]})}function A({group:s,setGroup:r,year:t}){const{t:i}=u();return e.jsxs(x,{display:"flex",flexDirection:"column",padding:2,gap:1,boxSizing:"border-box",children:[e.jsx(w,{title:`${t} ${i("medals_table")}`}),e.jsxs(h,{value:s,onChange:(o,n)=>r(n),children:[e.jsx(d,{label:i(`stats_group_enum.${a.feds}`),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),e.jsx(d,{label:i(`stats_group_enum.${a.clubs}`),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),e.jsx(d,{label:i(`stats_group_enum.${a.coaches}`),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),e.jsx(d,{label:i(`stats_group_enum.${a.players}`),sx:{minWidth:0,paddingRight:0,paddingLeft:0}})]}),e.jsxs(x,{display:"flex",flexGrow:1,children:[s===a.feds&&e.jsx(c,{group:a.feds,year:t}),s===a.clubs&&e.jsx(c,{group:a.clubs,year:t}),s===a.coaches&&e.jsx(c,{group:a.coaches,year:t}),s===a.players&&e.jsx(c,{group:a.players,year:t})]}),e.jsx(y,{})]})}const C=f.memo(A),M=p(function({params:r}){const t=Number(r.year)>0?Number(r.year):_,[i,o]=$("group",R(a).withDefault(a.feds).withOptions({clearOnDefault:!1})),{getStatsUrl:n}=S(),{t:g}=u();return e.jsxs(e.Fragment,{children:[e.jsx(F,{title:`${t} - ${g("medals_table")} - ${g(`stats_group_enum.${i}`)}`,description:g("year_description",{year:t}),url:n(t,!1)}),e.jsx(C,{year:t,group:i,setGroup:o})]})});export{M as S};
