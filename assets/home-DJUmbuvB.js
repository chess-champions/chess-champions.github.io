import{r as f,j as n,R as _,B as m,o as S,e as K,f as Q,L as Y,T as v,n as Z,p as ee,P as T,M as ne,q as oe,G as k,D as R,w as te,a as se}from"./about-DSTax99k.js";import{b as E,a as P,d as re,h as b,C as ie,G as ce,i as le,c as ae,Y as ue,j as de,L as fe,S as xe,J as pe,E as M,k as I,l as L,m as B,n as me,o as he,q as ge,r as je}from"./clubs-Cf-y8zUZ.js";const ve=({year:e,category:o,game:t,gender:s})=>{const{t:r}=E(),{getTournamentUrl:i}=P(),a=f.useMemo(()=>r(`gender_category.${s}.${o}`),[s,o,r]),u=f.useMemo(()=>{const j=r(`game_enum.${t}`);return a?`${e} ${j} - ${a}`:`${e} ${j}`},[e,t,a,r]),h=f.useMemo(()=>r("description",{game:r(`game_enum2.${t}`),gender_category:r(`gender_category_full.${s}.${o}`),year:e}),[e,o,t,s,r]),g=f.useMemo(()=>i(e,o,t,s,!1),[i,e,o,t,s]);return n.jsx(re,{title:u,description:h,url:g})},ye=({category:e,setCategory:o,direction:t="column"})=>{const s=b(),{t:r}=E();return n.jsx(m,{display:"flex",flexDirection:t,children:ie.map(i=>n.jsx(S,{variant:i===e?"contained":"text",color:s,onClick:()=>o(i),children:r(`category_enum_short.${i}`)},i))})},Ee=_.memo(ye),_e=({game:e,setGame:o,direction:t="column"})=>{const s=b(),{t:r}=E();return n.jsx(m,{display:"flex",flexDirection:t,children:ce.map(i=>n.jsx(S,{variant:i===e?"contained":"text",color:s,sx:{textTransform:"none"},onClick:()=>o(i),children:r(`game_enum_short_short.${i}`)},i))})},be=_.memo(_e),Te=({gender:e,setGender:o,direction:t="column"})=>{const s=b(),{t:r}=E();return n.jsx(m,{display:"flex",flexDirection:t,justifyContent:"center",alignItems:"center",gap:{xs:0,md:1},children:le.map(i=>n.jsx(S,{variant:i===e?"contained":"text",color:s,onClick:()=>o(i),children:r(`gender_enum_short.${i}`)},i))})},Ce=_.memo(Te),Se=K(n.jsx("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"})),$e=({year:e})=>{const o=b(),{t}=E(),{getStatsUrl:s}=P();return n.jsx(Q,{title:t("stats",{year:e}),children:n.jsx(S,{component:Y,to:s(e,!0),variant:"outlined",color:o,sx:{width:40,height:40,minWidth:40,padding:0,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",textTransform:"none"},children:n.jsx(Se,{fontSize:"small"})})})},ke=_.memo($e),Re=({result:e})=>{const{t:o,i18n:t}=E(),{getPlayerUrl:s}=P(),r=b(),i=(t.resolvedLanguage=="uk"?e.name_uk:e.name_en)||e.name_uk||e.name_en,a=[e.club,e.coach1,e.coach2,e.coach3].filter(Boolean).join(", ")||e.notes;return n.jsx(Y,{to:s(e.id),style:{textDecoration:"none",color:"inherit"},children:n.jsxs(m,{padding:2,gap:{xs:1,md:2},display:"flex",border:"1px solid #ddd",boxShadow:"0px 4px 6px rgba(63, 81, 181, 0.3)",bgcolor:e.rank<=3?"white":"",sx:{cursor:"pointer"},children:[n.jsx(m,{children:n.jsxs(v,{variant:"body1",children:[e.rank,"."]})}),n.jsxs(m,{flexGrow:1,children:[n.jsx(v,{variant:"body1",children:i}),a&&n.jsx(v,{variant:"body2",color:"textSecondary",paddingLeft:1,children:a})]}),n.jsxs(m,{children:[e.fed&&n.jsx(v,{variant:"body2",color:r,textAlign:"right",children:o(`federation_enum_short.${e.fed}`)}),e.points!=null&&n.jsx(v,{variant:"body2",color:"textSecondary",textAlign:"right",children:e.points})]})]})})},Pe=({tournament:e})=>{const{t:o,i18n:t}=E(),s=()=>{ae.event("external_link_click",{link_type:"chess-results",type:"tournament",id:e.id})},r=n.jsx(v,{component:"h3",variant:"body2",color:"textSecondary",align:"center",sx:e.id&&e.id>=0?{"&:hover":{textDecoration:"underline"}}:{},children:[o(`type_enum.${e.type}`),t.resolvedLanguage==="uk"?e.location_uk:e.location_en,e.date||null].filter(Boolean).join(", ")});return n.jsxs(m,{display:"flex",flexDirection:"column",gap:1,children:[e.id&&e.id>=0?n.jsx(Z,{href:`https://chess-results.com/tnr${e.id}.aspx?art=1`,onClick:s,target:"_blank",rel:"noopener",style:{textDecoration:"none",color:"inherit"},children:r}):r,((e.round??0)>0&&(e.round??0)<(e.rounds||1/0)||e.missedResults)&&n.jsxs(v,{component:"h4",variant:"body2",color:"textSecondary",align:"center",children:[o("rankAfterRound",{round:e.round??0}),e.missedResults?` (${o("missingResults",{count:e.missedResults})})`:""]}),e.results?.map((i,a)=>n.jsx(Re,{result:i},`${e.id}_${a}`))]})};function C(e){if(typeof window>"u")return e;const o=f.useRef(null);return f.useLayoutEffect(()=>{o.current=e}),f.useCallback((...t)=>{var s;(s=o.current)===null||s===void 0||s.call(o,...t)},[])}const F={};function Ge(e,o){F[e]||(F[e]=!0,console.error("[material-ui-popup-state] WARNING",o))}const Me={isOpen:!1,setAnchorElUsed:!1,anchorEl:void 0,anchorPosition:void 0,hovered:!1,focused:!1,_openEventType:null,_childPopupState:null,_deferNextOpen:!1,_deferNextClose:!1},U=ee,we="useId"in U?()=>U.useId():()=>{};function Ae({parentPopupState:e,popupId:o=we(),variant:t,disableAutoFocus:s}){const r=f.useRef(!0);f.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]);const[i,a]=f.useState(Me),u=f.useCallback(l=>{r.current&&a(l)},[]),h=f.useCallback(l=>u(c=>({...c,setAnchorElUsed:!0,anchorEl:l??void 0})),[]),g=C(l=>(i.isOpen?x(l):j(l),i)),j=C(l=>{const c=l instanceof Element?void 0:l,d=l instanceof Element?l:l?.currentTarget instanceof Element?l.currentTarget:void 0;if(c?.type==="touchstart"){u(p=>({...p,_deferNextOpen:!0}));return}const A=c?.clientX,D=c?.clientY,X=typeof A=="number"&&typeof D=="number"?{left:A,top:D}:void 0,N=p=>{if(!l&&!p.setAnchorElUsed&&t!=="dialog"&&Ge("missingEventOrAnchorEl","eventOrAnchorEl should be defined if setAnchorEl is not used"),e){if(!e.isOpen)return p;setTimeout(()=>e._setChildPopupState($))}const G={...p,isOpen:!0,anchorPosition:X,hovered:c?.type==="mouseover"||p.hovered,focused:c?.type==="focus"||p.focused,_openEventType:c?.type};return p.setAnchorElUsed||(c!=null&&c.currentTarget?G.anchorEl=c.currentTarget:d&&(G.anchorEl=d)),G};u(p=>p._deferNextOpen?(setTimeout(()=>u(N),0),{...p,_deferNextOpen:!1}):N(p))}),y=l=>{const{_childPopupState:c}=l;return setTimeout(()=>{c?.close(),e?._setChildPopupState(null)}),{...l,isOpen:!1,hovered:!1,focused:!1}},x=C(l=>{const c=l instanceof Element?void 0:l;if(c?.type==="touchstart"){u(d=>({...d,_deferNextClose:!0}));return}u(d=>d._deferNextClose?(setTimeout(()=>u(y),0),{...d,_deferNextClose:!1}):y(d))}),q=f.useCallback((l,c)=>{l?j(c):x(c)},[]),W=C(l=>{const{relatedTarget:c}=l;u(d=>d.hovered&&!(c instanceof Element&&w(c,$))?d.focused?{...d,hovered:!1}:y(d):d)}),J=C(l=>{if(!l)return;const{relatedTarget:c}=l;u(d=>d.focused&&!(c instanceof Element&&w(c,$))?d.hovered?{...d,focused:!1}:y(d):d)}),V=f.useCallback(l=>u(c=>({...c,_childPopupState:l})),[]),$={...i,setAnchorEl:h,popupId:o??void 0,variant:t,open:j,close:x,toggle:g,setOpen:q,onBlur:J,onMouseLeave:W,disableAutoFocus:s??!!(i.hovered||i.focused),_setChildPopupState:V};return $}function De({isOpen:e,popupId:o,variant:t}){return{...t==="popover"?{"aria-haspopup":!0,"aria-controls":e?o:void 0}:t==="popper"?{"aria-describedby":e?o:void 0}:void 0}}function Ne(e){return{...De(e),onClick:e.open,onTouchStart:e.open}}function Ie({isOpen:e,anchorEl:o,anchorPosition:t,close:s,popupId:r,onMouseLeave:i,disableAutoFocus:a,_openEventType:u}){return{id:r,anchorEl:o,anchorPosition:t,anchorReference:u==="contextmenu"?"anchorPosition":"anchorEl",open:e,onClose:s,onMouseLeave:i,...a&&{autoFocus:!1,disableAutoFocusItem:!0,disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0}}}function Le(e,{popupId:o}){if(!o)return null;const t=typeof e.getRootNode=="function"?e.getRootNode():document;return typeof t.getElementById=="function"?t.getElementById(o):null}function w(e,o){const{anchorEl:t,_childPopupState:s}=o;return H(t,e)||H(Le(e,o),e)||s!=null&&w(e,s)}function H(e,o){if(!e)return!1;for(;o;){if(o===e)return!0;o=o.parentElement}return!1}function z({children:e,popupId:o,variant:t,parentPopupState:s,disableAutoFocus:r}){const i=Ae({popupId:o,variant:t,parentPopupState:s,disableAutoFocus:r}),a=e(i);return a??null}z.propTypes={children:T.func.isRequired,popupId:T.string,variant:T.oneOf(["popover","popper"]).isRequired,parentPopupState:T.object,disableAutoFocus:T.bool};const Be=({year:e,setYear:o})=>{const t=b();return n.jsx(z,{variant:"popover",popupId:"year-menu",children:s=>n.jsxs(_.Fragment,{children:[n.jsx(S,{variant:"contained",color:t,...Ne(s),children:e}),n.jsx(ne,{...Ie(s),children:ue.map(r=>n.jsx(oe,{selected:r===e,onClick:()=>{s.close(),setTimeout(()=>{o(r)},50)},children:r},r))})]})})},Fe=_.memo(Be),Ue=({year:e,setYear:o,category:t,setCategory:s,game:r,setGame:i,gender:a,setGender:u,data:h})=>{const{t:g}=E(),j=f.useMemo(()=>g(`gender_category.${a}.${t}`),[t,a,g]);return n.jsx(de,{gender:a,children:n.jsxs(k,{container:!0,spacing:{xs:1,md:2},padding:2,minHeight:"100vh",children:[n.jsxs(k,{container:!0,direction:"column",gap:{xs:1,md:2},size:"auto",children:[n.jsx(Fe,{year:e,setYear:o}),n.jsx(R,{}),n.jsx(Ee,{category:t,setCategory:s}),n.jsx(R,{}),n.jsx(be,{game:r,setGame:i}),n.jsx(R,{}),n.jsx(m,{display:"flex",flexDirection:"column",flexGrow:1}),n.jsx(m,{display:"flex",alignItems:"center",justifyContent:"center",children:n.jsx(ke,{year:e})}),n.jsx(R,{}),n.jsx(fe,{})]}),n.jsxs(k,{container:!0,direction:"column",size:"grow",children:[n.jsx(Ce,{gender:a,setGender:u,direction:"row"}),n.jsxs(k,{size:"grow",spacing:{xs:1,md:2},children:[n.jsxs(m,{children:[n.jsxs(v,{variant:"h5",component:"h1",align:"center",children:[g(`game_enum.${r}`)," ",e]}),n.jsx(v,{variant:"h6",component:"h2",align:"center",color:"textSecondary",children:j})]}),n.jsxs(m,{display:"flex",flexDirection:"column",gap:{xs:1,md:2},flexGrow:1,marginBottom:4,children:[h&&h.length===0&&n.jsx(v,{variant:"body1",color:"textSecondary",align:"center",children:g("noData")}),h&&h.map((y,x)=>n.jsx(Pe,{tournament:y},`${e}_${x}`))]})]})]})]})})},He=_.memo(Ue),Ye="/";class ze{static async get(o,t,s,r){const i=xe.encode(`${o}_${t}_${s}_${r}`);return await pe.fetch(`${Ye}api/tournaments/${i}.json?v=f339c64`)}}function O(e){return{year:e.year?Number(e.year):me,category:e.category?M.stringToEnum(e.category,je)??B:B,game:e.game?M.stringToEnum(e.game,ge)??L:L,gender:e.gender?M.stringToEnum(e.gender,he)??I:I}}async function Je({params:e}){const{year:o,category:t,game:s,gender:r}=O(e);return await ze.get(o,t,s,r)}const Oe=({params:e,loaderData:o})=>{const{year:t,category:s,game:r,gender:i}=O(e),a=se(),{getTournamentUrl:u}=P(),h=f.useCallback(x=>a(u(x,s,r,i)),[a,u,s,r,i]),g=f.useCallback(x=>a(u(t,x,r,i)),[a,u,t,r,i]),j=f.useCallback(x=>a(u(t,s,x,i)),[a,u,t,s,i]),y=f.useCallback(x=>a(u(t,s,r,x)),[a,u,t,s,r]);return n.jsxs(n.Fragment,{children:[n.jsx(ve,{year:t,category:s,game:r,gender:i}),n.jsx(He,{year:t,setYear:h,category:s,setCategory:g,game:r,setGame:j,gender:i,setGender:y,data:o})]})},Ve=te(Oe);export{Ve as H,Je as c};
