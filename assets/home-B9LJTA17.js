import{r as f,j as n,R as b,B as m,o as $,e as Q,f as Z,L as O,T as j,n as ee,p as ne,P as C,M as oe,q as te,G as R,D as P,w as se,a as re}from"./about-hFlrwFyx.js";import{b as E,a as M,d as ie,h as T,C as ce,G as le,i as ae,g as G,c as ue,Y as de,j as fe,L as xe,S as pe,J as me,E as A,k as B,l as F,m as U,n as he,o as ge,q as je,r as ve}from"./clubs-C4_Zh-E0.js";function ye({year:e,category:o,game:r,gender:t}){const{t:s}=E(),{getTournamentUrl:i}=M(),a=f.useMemo(()=>s(`gender_category.${t}.${o}`),[t,o,s]),u=f.useMemo(()=>{const g=s(`game_enum.${r}`);return a?`${e} ${g} - ${a}`:`${e} ${g}`},[e,r,a,s]),x=f.useMemo(()=>s("description",{game:s(`game_enum2.${r}`),gender_category:s(`gender_category_full.${t}.${o}`),year:e}),[e,o,r,t,s]),h=f.useMemo(()=>i(e,o,r,t,!1),[i,e,o,r,t]);return n.jsx(ie,{title:u,description:x,url:h})}function Ee({category:e,setCategory:o,direction:r="column"}){const t=T(),{t:s}=E();return n.jsx(m,{display:"flex",flexDirection:r,children:ce.map(i=>n.jsx($,{variant:i===e?"contained":"text",color:t,onClick:()=>o(i),children:s(`category_enum_short.${i}`)},i))})}const _e=b.memo(Ee);function be({game:e,setGame:o,direction:r="column"}){const t=T(),{t:s}=E();return n.jsx(m,{display:"flex",flexDirection:r,children:le.map(i=>n.jsx($,{variant:i===e?"contained":"text",color:t,sx:{textTransform:"none"},onClick:()=>o(i),children:s(`game_enum_short_short.${i}`)},i))})}const Te=b.memo(be);function Ce({gender:e,setGender:o,direction:r="column"}){const t=T(),{t:s}=E();return n.jsx(m,{display:"flex",flexDirection:r,justifyContent:"center",alignItems:"center",gap:{xs:0,md:1},children:ae.map(i=>n.jsx($,{variant:i===e?"contained":"text",color:t,onClick:()=>o(i),children:s(`gender_enum_short.${i}`)},i))})}const Se=b.memo(Ce),$e=Q(n.jsx("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"}));function ke({year:e}){const o=T(),{t:r}=E(),{getStatsUrl:t}=M();return n.jsx(Z,{title:r("stats",{year:e}),children:n.jsx($,{component:O,to:t(e,!0),variant:"outlined",color:o,sx:{width:40,height:40,minWidth:40,padding:0,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",textTransform:"none"},children:n.jsx($e,{fontSize:"small"})})})}const Re=b.memo(ke);function Pe({result:e}){const{t:o,i18n:r}=E(),{getPlayerUrl:t}=M(),s=T(),i=(r.resolvedLanguage=="uk"?e.name_uk:e.name_en)||e.name_uk||e.name_en,a=[G(e.club),G(e.coach1),G(e.coach2),G(e.coach3)].filter(Boolean).join(", ")||e.notes;return n.jsx(O,{to:t(e.id),style:{textDecoration:"none",color:"inherit"},children:n.jsxs(m,{padding:2,gap:{xs:1,md:2},display:"flex",border:"1px solid #ddd",boxShadow:"0px 4px 6px rgba(63, 81, 181, 0.3)",bgcolor:e.rank<=3?"white":"",sx:{cursor:"pointer"},children:[n.jsx(m,{children:n.jsxs(j,{variant:"body1",children:[e.rank,"."]})}),n.jsxs(m,{flexGrow:1,children:[n.jsx(j,{variant:"body1",children:i}),a&&n.jsx(j,{variant:"body2",color:"textSecondary",paddingLeft:1,children:a})]}),n.jsxs(m,{children:[e.fed&&n.jsx(j,{variant:"body2",color:s,textAlign:"right",children:o(`federation_enum_short.${e.fed}`)}),e.points!=null&&n.jsx(j,{variant:"body2",color:"textSecondary",textAlign:"right",children:e.points})]})]})})}function Ge({tournament:e}){const{t:o,i18n:r}=E(),t=()=>{ue.event("external_link_click",{link_type:"chess-results",type:"tournament",id:e.id})},s=n.jsx(j,{component:"h3",variant:"body2",color:"textSecondary",align:"center",sx:e.id&&e.id>=0?{"&:hover":{textDecoration:"underline"}}:{},children:[o(`type_enum.${e.type}`),r.resolvedLanguage==="uk"?e.location_uk:e.location_en,e.date||null].filter(Boolean).join(", ")});return n.jsxs(m,{display:"flex",flexDirection:"column",gap:1,children:[e.id&&e.id>=0?n.jsx(ee,{href:`https://chess-results.com/tnr${e.id}.aspx?art=1`,onClick:t,target:"_blank",rel:"noopener",style:{textDecoration:"none",color:"inherit"},children:s}):s,((e.round??0)>0&&(e.round??0)<(e.rounds||1/0)||e.missedResults)&&n.jsxs(j,{component:"h4",variant:"body2",color:"textSecondary",align:"center",children:[o("rankAfterRound",{round:e.round??0}),e.missedResults?` (${o("missingResults",{count:e.missedResults})})`:""]}),e.results?.map((i,a)=>n.jsx(Pe,{result:i},`${e.id}_${a}`))]})}function S(e){if(typeof window>"u")return e;const o=f.useRef(null);return f.useLayoutEffect(()=>{o.current=e}),f.useCallback((...r)=>{var t;(t=o.current)===null||t===void 0||t.call(o,...r)},[])}const H={};function Me(e,o){H[e]||(H[e]=!0,console.error("[material-ui-popup-state] WARNING",o))}const we={isOpen:!1,setAnchorElUsed:!1,anchorEl:void 0,anchorPosition:void 0,hovered:!1,focused:!1,_openEventType:null,_childPopupState:null,_deferNextOpen:!1,_deferNextClose:!1},Y=ne,Ae="useId"in Y?()=>Y.useId():()=>{};function Ne({parentPopupState:e,popupId:o=Ae(),variant:r,disableAutoFocus:t}){const s=f.useRef(!0);f.useEffect(()=>(s.current=!0,()=>{s.current=!1}),[]);const[i,a]=f.useState(we),u=f.useCallback(l=>{s.current&&a(l)},[]),x=f.useCallback(l=>u(c=>({...c,setAnchorElUsed:!0,anchorEl:l??void 0})),[]),h=S(l=>(i.isOpen?_(l):g(l),i)),g=S(l=>{const c=l instanceof Element?void 0:l,d=l instanceof Element?l:l?.currentTarget instanceof Element?l.currentTarget:void 0;if(c?.type==="touchstart"){u(p=>({...p,_deferNextOpen:!0}));return}const D=c?.clientX,I=c?.clientY,K=typeof D=="number"&&typeof I=="number"?{left:D,top:I}:void 0,L=p=>{if(!l&&!p.setAnchorElUsed&&r!=="dialog"&&Me("missingEventOrAnchorEl","eventOrAnchorEl should be defined if setAnchorEl is not used"),e){if(!e.isOpen)return p;setTimeout(()=>e._setChildPopupState(k))}const w={...p,isOpen:!0,anchorPosition:K,hovered:c?.type==="mouseover"||p.hovered,focused:c?.type==="focus"||p.focused,_openEventType:c?.type};return p.setAnchorElUsed||(c!=null&&c.currentTarget?w.anchorEl=c.currentTarget:d&&(w.anchorEl=d)),w};u(p=>p._deferNextOpen?(setTimeout(()=>u(L),0),{...p,_deferNextOpen:!1}):L(p))}),y=l=>{const{_childPopupState:c}=l;return setTimeout(()=>{c?.close(),e?._setChildPopupState(null)}),{...l,isOpen:!1,hovered:!1,focused:!1}},_=S(l=>{const c=l instanceof Element?void 0:l;if(c?.type==="touchstart"){u(d=>({...d,_deferNextClose:!0}));return}u(d=>d._deferNextClose?(setTimeout(()=>u(y),0),{...d,_deferNextClose:!1}):y(d))}),v=f.useCallback((l,c)=>{l?g(c):_(c)},[]),J=S(l=>{const{relatedTarget:c}=l;u(d=>d.hovered&&!(c instanceof Element&&N(c,k))?d.focused?{...d,hovered:!1}:y(d):d)}),V=S(l=>{if(!l)return;const{relatedTarget:c}=l;u(d=>d.focused&&!(c instanceof Element&&N(c,k))?d.hovered?{...d,focused:!1}:y(d):d)}),X=f.useCallback(l=>u(c=>({...c,_childPopupState:l})),[]),k={...i,setAnchorEl:x,popupId:o??void 0,variant:r,open:g,close:_,toggle:h,setOpen:v,onBlur:V,onMouseLeave:J,disableAutoFocus:t??!!(i.hovered||i.focused),_setChildPopupState:X};return k}function De({isOpen:e,popupId:o,variant:r}){return{...r==="popover"?{"aria-haspopup":!0,"aria-controls":e?o:void 0}:r==="popper"?{"aria-describedby":e?o:void 0}:void 0}}function Ie(e){return{...De(e),onClick:e.open,onTouchStart:e.open}}function Le({isOpen:e,anchorEl:o,anchorPosition:r,close:t,popupId:s,onMouseLeave:i,disableAutoFocus:a,_openEventType:u}){return{id:s,anchorEl:o,anchorPosition:r,anchorReference:u==="contextmenu"?"anchorPosition":"anchorEl",open:e,onClose:t,onMouseLeave:i,...a&&{autoFocus:!1,disableAutoFocusItem:!0,disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0}}}function Be(e,{popupId:o}){if(!o)return null;const r=typeof e.getRootNode=="function"?e.getRootNode():document;return typeof r.getElementById=="function"?r.getElementById(o):null}function N(e,o){const{anchorEl:r,_childPopupState:t}=o;return z(r,e)||z(Be(e,o),e)||t!=null&&N(e,t)}function z(e,o){if(!e)return!1;for(;o;){if(o===e)return!0;o=o.parentElement}return!1}function q({children:e,popupId:o,variant:r,parentPopupState:t,disableAutoFocus:s}){const i=Ne({popupId:o,variant:r,parentPopupState:t,disableAutoFocus:s}),a=e(i);return a??null}q.propTypes={children:C.func.isRequired,popupId:C.string,variant:C.oneOf(["popover","popper"]).isRequired,parentPopupState:C.object,disableAutoFocus:C.bool};function Fe({year:e,setYear:o}){const r=T();return n.jsx(q,{variant:"popover",popupId:"year-menu",children:t=>n.jsxs(b.Fragment,{children:[n.jsx($,{variant:"contained",color:r,...Ie(t),children:e}),n.jsx(oe,{...Le(t),children:de.map(s=>n.jsx(te,{selected:s===e,onClick:()=>{t.close(),setTimeout(()=>{o(s)},50)},children:s},s))})]})})}const Ue=b.memo(Fe);function He({year:e,setYear:o,category:r,setCategory:t,game:s,setGame:i,gender:a,setGender:u,data:x}){const{t:h}=E(),g=f.useMemo(()=>h(`gender_category.${a}.${r}`),[r,a,h]);return n.jsx(fe,{gender:a,children:n.jsxs(R,{container:!0,spacing:{xs:1,md:2},padding:2,minHeight:"100vh",children:[n.jsxs(R,{container:!0,direction:"column",gap:{xs:1,md:2},size:"auto",children:[n.jsx(Ue,{year:e,setYear:o}),n.jsx(P,{}),n.jsx(_e,{category:r,setCategory:t}),n.jsx(P,{}),n.jsx(Te,{game:s,setGame:i}),n.jsx(P,{}),n.jsx(m,{display:"flex",flexDirection:"column",flexGrow:1}),n.jsx(m,{display:"flex",alignItems:"center",justifyContent:"center",children:n.jsx(Re,{year:e})}),n.jsx(P,{}),n.jsx(xe,{})]}),n.jsxs(R,{container:!0,direction:"column",size:"grow",children:[n.jsx(Se,{gender:a,setGender:u,direction:"row"}),n.jsxs(R,{size:"grow",spacing:{xs:1,md:2},children:[n.jsxs(m,{children:[n.jsxs(j,{variant:"h5",component:"h1",align:"center",children:[h(`game_enum.${s}`)," ",e]}),n.jsx(j,{variant:"h6",component:"h2",align:"center",color:"textSecondary",children:g})]}),n.jsxs(m,{display:"flex",flexDirection:"column",gap:{xs:1,md:2},flexGrow:1,marginBottom:4,children:[x&&x.length===0&&n.jsx(j,{variant:"body1",color:"textSecondary",align:"center",children:h("noData")}),x&&x.map((y,_)=>n.jsx(Ge,{tournament:y},`${e}_${_}`))]})]})]})]})})}const Ye=b.memo(He),ze="/";class Oe{static async get(o,r,t,s){const i=pe.encode(`${o}_${r}_${t}_${s}`);return await me.fetch(`${ze}api/tournaments/${i}.json?v=cd8f56b`)}}function W(e){return{year:e.year?Number(e.year):he,category:e.category?A.stringToEnum(e.category,ve)??U:U,game:e.game?A.stringToEnum(e.game,je)??F:F,gender:e.gender?A.stringToEnum(e.gender,ge)??B:B}}async function Je({params:e}){const{year:o,category:r,game:t,gender:s}=W(e);return await Oe.get(o,r,t,s)}const Ve=se(function({params:o,loaderData:r}){const{year:t,category:s,game:i,gender:a}=W(o),u=re(),{getTournamentUrl:x}=M(),h=f.useCallback(v=>u(x(v,s,i,a)),[u,x,s,i,a]),g=f.useCallback(v=>u(x(t,v,i,a)),[u,x,t,i,a]),y=f.useCallback(v=>u(x(t,s,v,a)),[u,x,t,s,a]),_=f.useCallback(v=>u(x(t,s,i,v)),[u,x,t,s,i]);return n.jsxs(n.Fragment,{children:[n.jsx(ye,{year:t,category:s,game:i,gender:a}),n.jsx(Ye,{year:t,setYear:h,category:s,setCategory:g,game:i,setGame:y,gender:a,setGender:_,data:r})]})});export{Ve as H,Je as c};
