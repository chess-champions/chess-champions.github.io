import{R as v,r as a,j as e,B as i,T as c,n as C,l as k,m as f,w as R}from"./about-DSTax99k.js";import{u as w,p as F,a as u,b as g,D as S,H as T,R as $,F as B,c as L,g as m,S as M,d as E}from"./clubs-B8J7D3rt.js";import{M as p,R as d}from"./results-BvPSKTG2.js";const P=({data:s})=>{const[o,r]=w("tab",F.withDefault(0)),{getFederationUrl:x}=u(),{t:n,i18n:t}=g(),l=a.useMemo(()=>(t.resolvedLanguage==="uk"?s?.name_uk:s?.name_en)||s?.name_uk||s?.name_en||"",[s,t.resolvedLanguage]),h=a.useMemo(()=>n("coach_title",{name:l}),[n,l]),j=()=>{L.event("external_link_click",{link_type:"fide_profile",type:"coach",id:s.id,name:m(s)})},y=a.useCallback((I,_)=>{r(_)},[r]),b=S.currentYear();return e.jsxs(i,{display:"flex",flexDirection:"column",padding:2,gap:1,boxSizing:"border-box",minHeight:"100vh",children:[e.jsx(T,{title:h}),e.jsxs(i,{display:"flex",sx:{flexDirection:{xs:"column",md:"row"},gap:4},children:[s.photo&&e.jsx(i,{display:"flex",justifyContent:"center",children:e.jsx(i,{component:"img",src:s.photo,alt:l,sx:{width:150,height:150,objectFit:"cover",borderRadius:"50%",boxShadow:2}})}),e.jsxs(i,{display:"flex",flexDirection:"column",flex:1,children:[s.id&&s.id>0&&e.jsxs(i,{display:"flex",children:[e.jsx(i,{flexBasis:"50%",children:e.jsxs(c,{variant:"body1",children:[n("fide"),":"]})}),e.jsx(i,{flexBasis:"50%",children:e.jsx(C,{href:`https://ratings.fide.com/profile/${s.id}`,onClick:j,variant:"body1",target:"_blank",rel:"noopener",children:s.id})})]}),s.yob&&e.jsxs(i,{display:"flex",children:[e.jsx(i,{flexBasis:"50%",children:e.jsxs(c,{variant:"body1",children:[n("year_of_birth"),":"]})}),e.jsxs(i,{display:"flex",flexBasis:"50%",gap:1,children:[e.jsx(c,{variant:"body1",children:s.yob}),e.jsx(c,{variant:"body1",color:"textSecondary",children:`(${b-s.yob} ${n("years")})`})]})]}),s.fed&&e.jsxs(i,{display:"flex",children:[e.jsx(i,{flexBasis:"50%",children:e.jsxs(c,{variant:"body1",children:[n("federation"),":"]})}),e.jsx(i,{flexBasis:"50%",children:e.jsx($,{to:x(s.fed),children:n(`federation_enum_short.${s.fed}`)})})]})]})]}),e.jsxs(k,{value:o,onChange:y,children:[e.jsx(f,{label:n("results"),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),e.jsx(f,{label:n("player",{count:2}),sx:{minWidth:0,paddingRight:0,paddingLeft:0}})]}),e.jsxs(i,{display:"flex",flexGrow:1,children:[o===0&&e.jsx(p,{filterField:d.Coach,filterId:s.id,groupField:d.Year,results:s.years}),o===1&&e.jsx(p,{filterField:d.Coach,filterId:s.id,groupField:d.Player,results:s.players})]}),e.jsx(B,{})]})},D=v.memo(P),N="/",A={async get(s){const o=M.encode(s.toString()),r=await fetch(`${N}api/coaches/${o}.json?v=3124165`);if(!r.ok)throw new Error(`Failed to get coach (id=${s}) data`);return await r.json()}};async function G({params:s}){return await A.get(Number(s.id))}const H=({params:s,loaderData:o})=>{const r=Number(s.id),{getCoachUrl:x}=u(),{t:n}=g(),t=a.useMemo(()=>m(o),[o]),l=a.useMemo(()=>n("coach_title",{name:t}),[n,t]),h=a.useMemo(()=>n("coach_description",{name:t}),[n,t]);return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:l,description:h,url:x(r,!1)}),e.jsx(D,{data:o})]})},W=R(H);export{W as C,G as c};
