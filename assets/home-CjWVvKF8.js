import{r as f,j as n,R as b,B as m,o as $,e as K,f as Q,L as z,T as j,n as Z,p as ee,P as C,M as ne,q as oe,G as R,D as P,w as te,a as se}from"./about-hFlrwFyx.js";import{b as E,a as G,d as re,h as T,C as ie,G as ce,i as le,c as ae,Y as ue,j as de,L as fe,S as xe,J as pe,E as w,k as L,l as B,m as F,n as me,o as he,q as ge,r as je}from"./clubs-Dr8fdveJ.js";function ve({year:e,category:o,game:r,gender:t}){const{t:s}=E(),{getTournamentUrl:i}=G(),a=f.useMemo(()=>s(`gender_category.${t}.${o}`),[t,o,s]),u=f.useMemo(()=>{const g=s(`game_enum.${r}`);return a?`${e} ${g} - ${a}`:`${e} ${g}`},[e,r,a,s]),x=f.useMemo(()=>s("description",{game:s(`game_enum2.${r}`),gender_category:s(`gender_category_full.${t}.${o}`),year:e}),[e,o,r,t,s]),h=f.useMemo(()=>i(e,o,r,t,!1),[i,e,o,r,t]);return n.jsx(re,{title:u,description:x,url:h})}function ye({category:e,setCategory:o,direction:r="column"}){const t=T(),{t:s}=E();return n.jsx(m,{display:"flex",flexDirection:r,children:ie.map(i=>n.jsx($,{variant:i===e?"contained":"text",color:t,onClick:()=>o(i),children:s(`category_enum_short.${i}`)},i))})}const Ee=b.memo(ye);function _e({game:e,setGame:o,direction:r="column"}){const t=T(),{t:s}=E();return n.jsx(m,{display:"flex",flexDirection:r,children:ce.map(i=>n.jsx($,{variant:i===e?"contained":"text",color:t,sx:{textTransform:"none"},onClick:()=>o(i),children:s(`game_enum_short_short.${i}`)},i))})}const be=b.memo(_e);function Te({gender:e,setGender:o,direction:r="column"}){const t=T(),{t:s}=E();return n.jsx(m,{display:"flex",flexDirection:r,justifyContent:"center",alignItems:"center",gap:{xs:0,md:1},children:le.map(i=>n.jsx($,{variant:i===e?"contained":"text",color:t,onClick:()=>o(i),children:s(`gender_enum_short.${i}`)},i))})}const Ce=b.memo(Te),Se=K(n.jsx("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"}));function $e({year:e}){const o=T(),{t:r}=E(),{getStatsUrl:t}=G();return n.jsx(Q,{title:r("stats",{year:e}),children:n.jsx($,{component:z,to:t(e,!0),variant:"outlined",color:o,sx:{width:40,height:40,minWidth:40,padding:0,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",textTransform:"none"},children:n.jsx(Se,{fontSize:"small"})})})}const ke=b.memo($e);function Re({result:e}){const{t:o,i18n:r}=E(),{getPlayerUrl:t}=G(),s=T(),i=(r.resolvedLanguage=="uk"?e.name_uk:e.name_en)||e.name_uk||e.name_en,a=[e.club,e.coach1,e.coach2,e.coach3].filter(Boolean).join(", ")||e.notes;return n.jsx(z,{to:t(e.id),style:{textDecoration:"none",color:"inherit"},children:n.jsxs(m,{padding:2,gap:{xs:1,md:2},display:"flex",border:"1px solid #ddd",boxShadow:"0px 4px 6px rgba(63, 81, 181, 0.3)",bgcolor:e.rank<=3?"white":"",sx:{cursor:"pointer"},children:[n.jsx(m,{children:n.jsxs(j,{variant:"body1",children:[e.rank,"."]})}),n.jsxs(m,{flexGrow:1,children:[n.jsx(j,{variant:"body1",children:i}),a&&n.jsx(j,{variant:"body2",color:"textSecondary",paddingLeft:1,children:a})]}),n.jsxs(m,{children:[e.fed&&n.jsx(j,{variant:"body2",color:s,textAlign:"right",children:o(`federation_enum_short.${e.fed}`)}),e.points!=null&&n.jsx(j,{variant:"body2",color:"textSecondary",textAlign:"right",children:e.points})]})]})})}function Pe({tournament:e}){const{t:o,i18n:r}=E(),t=()=>{ae.event("external_link_click",{link_type:"chess-results",type:"tournament",id:e.id})},s=n.jsx(j,{component:"h3",variant:"body2",color:"textSecondary",align:"center",sx:e.id&&e.id>=0?{"&:hover":{textDecoration:"underline"}}:{},children:[o(`type_enum.${e.type}`),r.resolvedLanguage==="uk"?e.location_uk:e.location_en,e.date||null].filter(Boolean).join(", ")});return n.jsxs(m,{display:"flex",flexDirection:"column",gap:1,children:[e.id&&e.id>=0?n.jsx(Z,{href:`https://chess-results.com/tnr${e.id}.aspx?art=1`,onClick:t,target:"_blank",rel:"noopener",style:{textDecoration:"none",color:"inherit"},children:s}):s,((e.round??0)>0&&(e.round??0)<(e.rounds||1/0)||e.missedResults)&&n.jsxs(j,{component:"h4",variant:"body2",color:"textSecondary",align:"center",children:[o("rankAfterRound",{round:e.round??0}),e.missedResults?` (${o("missingResults",{count:e.missedResults})})`:""]}),e.results?.map((i,a)=>n.jsx(Re,{result:i},`${e.id}_${a}`))]})}function S(e){if(typeof window>"u")return e;const o=f.useRef(null);return f.useLayoutEffect(()=>{o.current=e}),f.useCallback((...r)=>{var t;(t=o.current)===null||t===void 0||t.call(o,...r)},[])}const U={};function Ge(e,o){U[e]||(U[e]=!0,console.error("[material-ui-popup-state] WARNING",o))}const Me={isOpen:!1,setAnchorElUsed:!1,anchorEl:void 0,anchorPosition:void 0,hovered:!1,focused:!1,_openEventType:null,_childPopupState:null,_deferNextOpen:!1,_deferNextClose:!1},H=ee,we="useId"in H?()=>H.useId():()=>{};function Ae({parentPopupState:e,popupId:o=we(),variant:r,disableAutoFocus:t}){const s=f.useRef(!0);f.useEffect(()=>(s.current=!0,()=>{s.current=!1}),[]);const[i,a]=f.useState(Me),u=f.useCallback(l=>{s.current&&a(l)},[]),x=f.useCallback(l=>u(c=>({...c,setAnchorElUsed:!0,anchorEl:l??void 0})),[]),h=S(l=>(i.isOpen?_(l):g(l),i)),g=S(l=>{const c=l instanceof Element?void 0:l,d=l instanceof Element?l:l?.currentTarget instanceof Element?l.currentTarget:void 0;if(c?.type==="touchstart"){u(p=>({...p,_deferNextOpen:!0}));return}const D=c?.clientX,N=c?.clientY,X=typeof D=="number"&&typeof N=="number"?{left:D,top:N}:void 0,I=p=>{if(!l&&!p.setAnchorElUsed&&r!=="dialog"&&Ge("missingEventOrAnchorEl","eventOrAnchorEl should be defined if setAnchorEl is not used"),e){if(!e.isOpen)return p;setTimeout(()=>e._setChildPopupState(k))}const M={...p,isOpen:!0,anchorPosition:X,hovered:c?.type==="mouseover"||p.hovered,focused:c?.type==="focus"||p.focused,_openEventType:c?.type};return p.setAnchorElUsed||(c!=null&&c.currentTarget?M.anchorEl=c.currentTarget:d&&(M.anchorEl=d)),M};u(p=>p._deferNextOpen?(setTimeout(()=>u(I),0),{...p,_deferNextOpen:!1}):I(p))}),y=l=>{const{_childPopupState:c}=l;return setTimeout(()=>{c?.close(),e?._setChildPopupState(null)}),{...l,isOpen:!1,hovered:!1,focused:!1}},_=S(l=>{const c=l instanceof Element?void 0:l;if(c?.type==="touchstart"){u(d=>({...d,_deferNextClose:!0}));return}u(d=>d._deferNextClose?(setTimeout(()=>u(y),0),{...d,_deferNextClose:!1}):y(d))}),v=f.useCallback((l,c)=>{l?g(c):_(c)},[]),W=S(l=>{const{relatedTarget:c}=l;u(d=>d.hovered&&!(c instanceof Element&&A(c,k))?d.focused?{...d,hovered:!1}:y(d):d)}),J=S(l=>{if(!l)return;const{relatedTarget:c}=l;u(d=>d.focused&&!(c instanceof Element&&A(c,k))?d.hovered?{...d,focused:!1}:y(d):d)}),V=f.useCallback(l=>u(c=>({...c,_childPopupState:l})),[]),k={...i,setAnchorEl:x,popupId:o??void 0,variant:r,open:g,close:_,toggle:h,setOpen:v,onBlur:J,onMouseLeave:W,disableAutoFocus:t??!!(i.hovered||i.focused),_setChildPopupState:V};return k}function De({isOpen:e,popupId:o,variant:r}){return{...r==="popover"?{"aria-haspopup":!0,"aria-controls":e?o:void 0}:r==="popper"?{"aria-describedby":e?o:void 0}:void 0}}function Ne(e){return{...De(e),onClick:e.open,onTouchStart:e.open}}function Ie({isOpen:e,anchorEl:o,anchorPosition:r,close:t,popupId:s,onMouseLeave:i,disableAutoFocus:a,_openEventType:u}){return{id:s,anchorEl:o,anchorPosition:r,anchorReference:u==="contextmenu"?"anchorPosition":"anchorEl",open:e,onClose:t,onMouseLeave:i,...a&&{autoFocus:!1,disableAutoFocusItem:!0,disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0}}}function Le(e,{popupId:o}){if(!o)return null;const r=typeof e.getRootNode=="function"?e.getRootNode():document;return typeof r.getElementById=="function"?r.getElementById(o):null}function A(e,o){const{anchorEl:r,_childPopupState:t}=o;return Y(r,e)||Y(Le(e,o),e)||t!=null&&A(e,t)}function Y(e,o){if(!e)return!1;for(;o;){if(o===e)return!0;o=o.parentElement}return!1}function O({children:e,popupId:o,variant:r,parentPopupState:t,disableAutoFocus:s}){const i=Ae({popupId:o,variant:r,parentPopupState:t,disableAutoFocus:s}),a=e(i);return a??null}O.propTypes={children:C.func.isRequired,popupId:C.string,variant:C.oneOf(["popover","popper"]).isRequired,parentPopupState:C.object,disableAutoFocus:C.bool};function Be({year:e,setYear:o}){const r=T();return n.jsx(O,{variant:"popover",popupId:"year-menu",children:t=>n.jsxs(b.Fragment,{children:[n.jsx($,{variant:"contained",color:r,...Ne(t),children:e}),n.jsx(ne,{...Ie(t),children:ue.map(s=>n.jsx(oe,{selected:s===e,onClick:()=>{t.close(),setTimeout(()=>{o(s)},50)},children:s},s))})]})})}const Fe=b.memo(Be);function Ue({year:e,setYear:o,category:r,setCategory:t,game:s,setGame:i,gender:a,setGender:u,data:x}){const{t:h}=E(),g=f.useMemo(()=>h(`gender_category.${a}.${r}`),[r,a,h]);return n.jsx(de,{gender:a,children:n.jsxs(R,{container:!0,spacing:{xs:1,md:2},padding:2,minHeight:"100vh",children:[n.jsxs(R,{container:!0,direction:"column",gap:{xs:1,md:2},size:"auto",children:[n.jsx(Fe,{year:e,setYear:o}),n.jsx(P,{}),n.jsx(Ee,{category:r,setCategory:t}),n.jsx(P,{}),n.jsx(be,{game:s,setGame:i}),n.jsx(P,{}),n.jsx(m,{display:"flex",flexDirection:"column",flexGrow:1}),n.jsx(m,{display:"flex",alignItems:"center",justifyContent:"center",children:n.jsx(ke,{year:e})}),n.jsx(P,{}),n.jsx(fe,{})]}),n.jsxs(R,{container:!0,direction:"column",size:"grow",children:[n.jsx(Ce,{gender:a,setGender:u,direction:"row"}),n.jsxs(R,{size:"grow",spacing:{xs:1,md:2},children:[n.jsxs(m,{children:[n.jsxs(j,{variant:"h5",component:"h1",align:"center",children:[h(`game_enum.${s}`)," ",e]}),n.jsx(j,{variant:"h6",component:"h2",align:"center",color:"textSecondary",children:g})]}),n.jsxs(m,{display:"flex",flexDirection:"column",gap:{xs:1,md:2},flexGrow:1,marginBottom:4,children:[x&&x.length===0&&n.jsx(j,{variant:"body1",color:"textSecondary",align:"center",children:h("noData")}),x&&x.map((y,_)=>n.jsx(Pe,{tournament:y},`${e}_${_}`))]})]})]})]})})}const He=b.memo(Ue),Ye="/";class ze{static async get(o,r,t,s){const i=xe.encode(`${o}_${r}_${t}_${s}`);return await pe.fetch(`${Ye}api/tournaments/${i}.json?v=02aa186`)}}function q(e){return{year:e.year?Number(e.year):me,category:e.category?w.stringToEnum(e.category,je)??F:F,game:e.game?w.stringToEnum(e.game,ge)??B:B,gender:e.gender?w.stringToEnum(e.gender,he)??L:L}}async function We({params:e}){const{year:o,category:r,game:t,gender:s}=q(e);return await ze.get(o,r,t,s)}const Je=te(function({params:o,loaderData:r}){const{year:t,category:s,game:i,gender:a}=q(o),u=se(),{getTournamentUrl:x}=G(),h=f.useCallback(v=>u(x(v,s,i,a)),[u,x,s,i,a]),g=f.useCallback(v=>u(x(t,v,i,a)),[u,x,t,i,a]),y=f.useCallback(v=>u(x(t,s,v,a)),[u,x,t,s,a]),_=f.useCallback(v=>u(x(t,s,i,v)),[u,x,t,s,i]);return n.jsxs(n.Fragment,{children:[n.jsx(ve,{year:t,category:s,game:i,gender:a}),n.jsx(He,{year:t,setYear:h,category:s,setCategory:g,game:i,setGame:y,gender:a,setGender:_,data:r})]})});export{Je as H,We as c};
