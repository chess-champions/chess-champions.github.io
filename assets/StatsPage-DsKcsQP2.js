import{n as h,j as e,B as i,p as b,T as y,R as j}from"./index-BqxLOgZN.js";import{t as f,i as w,E as S,j as v,Y as x,p as T,q as D,S as I}from"./ChessDataService-CTOFvR_F.js";import{p as k,S as E,K as F,P as R,V as B,a as z}from"./swiper-react-DBhoY3Ul.js";import{u,F as A}from"./useNavigationService-CYtF_U-i.js";import{I as C,R as $,H as K,F as P}from"./RouterLink-DD0YQUP4.js";import{K as Y,a as _,C as L,R as O}from"./ResultList-BtdCdd8M.js";import{T as V,a as H,b as U,c,d as a,e as q}from"./TableRow-P2zv9o9q.js";import{P as G}from"./Paper-Bz835GP9.js";import"./Divider-AJO3goaj.js";const Q=({year:n})=>{var g;const[t,o]=f("fed",k(A)),{getFederationUrl:l}=u(),{t:r}=h(),{data:m,isLoading:p,error:d}=w({queryKey:["years",{year:n}],queryFn:async()=>await v.getYear(n)});return e.jsxs(i,{display:"flex",flexDirection:"column",flexGrow:"grow",marginBottom:4,sx:{overflow:"auto",height:"100%"},children:[p&&e.jsx(b,{}),d&&e.jsx(S,{message:d.message}),!p&&!d&&m&&e.jsx(V,{component:G,children:e.jsxs(H,{stickyHeader:!0,sx:{"& th, & td":{padding:{xs:"6px 8px",sm:"6px 10px",md:"6px 12px",lg:"6px 16px"}}},children:[e.jsx(U,{children:e.jsxs(c,{children:[e.jsx(a,{}),e.jsx(a,{align:"left",children:e.jsx(y,{children:r("federation_short")})}),e.jsx(a,{children:e.jsxs(i,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(i,{sx:{display:{xs:"none",sm:"block"}},children:r("gold")}),e.jsx("img",{alt:r("gold"),width:"16",height:"16",src:"/gold.svg"})]})}),e.jsx(a,{children:e.jsxs(i,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(i,{sx:{display:{xs:"none",sm:"block"}},children:r("silver")}),e.jsx("img",{alt:r("silver"),width:"16",height:"16",src:"/silver.svg"})]})}),e.jsx(a,{children:e.jsxs(i,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(i,{sx:{display:{xs:"none",sm:"block"}},children:r("bronze")}),e.jsx("img",{alt:r("bronze"),width:"16",height:"16",src:"/bronze.svg"})]})}),e.jsx(a,{children:e.jsxs(i,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(i,{sx:{display:{xs:"none",sm:"block"}},children:r("total")}),e.jsx("img",{alt:r("total"),width:"16",height:"16",src:"/total.svg"})]})})]})}),e.jsx(q,{children:(g=m.results)==null?void 0:g.map(s=>e.jsxs(j.Fragment,{children:[e.jsxs(c,{sx:{"& td":{borderBottom:"none"}},children:[e.jsx(a,{children:e.jsxs(i,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(C,{sx:{padding:"0px"},size:"small",onClick:()=>o(s.fed===t?null:s.fed),children:s.fed===t?e.jsx(Y,{}):e.jsx(_,{})}),s.rank,"."]})}),e.jsx(a,{children:s.fed&&e.jsx($,{to:l(s.fed),children:r(`federation_enum_short.${s.fed}`)})}),e.jsx(a,{align:"center",children:s.gold||0}),e.jsx(a,{align:"center",children:s.silver||0}),e.jsx(a,{align:"center",children:s.bronze||0}),e.jsx(a,{align:"center",children:(s.gold||0)+(s.silver||0)+(s.bronze||0)})]}),e.jsx(c,{children:e.jsx(a,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:e.jsx(L,{in:s.fed===t,timeout:"auto",unmountOnExit:!0,children:e.jsx(i,{marginTop:1,marginBottom:2,children:e.jsx(O,{year:n,federation:s.fed})})})})})]},`${n}_${s.fed}`))})]})})]})},M=({year:n,setYear:t})=>{const{t:o}=h();return e.jsxs(i,{display:"flex",flexDirection:"column",height:"100vh",padding:2,gap:1,boxSizing:"border-box",overflow:"hidden",children:[e.jsx(K,{title:`${n} ${o("medals_table")}`}),e.jsx(i,{display:"flex",flexGrow:1,overflow:"hidden",height:"100%",children:e.jsx(E,{direction:"horizontal",initialSlide:x.indexOf(n),loop:!0,spaceBetween:10,slidesPerView:1,style:{width:"100%",height:"100%"},pagination:{clickable:!1},keyboard:{enabled:!0},onSlideChange:l=>{const r=x[l.realIndex];t(r)},virtual:{enabled:!0},modules:[F,R,B],children:x.map(l=>e.jsx(z,{"aria-hidden":n!==l,children:e.jsx(i,{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%",children:e.jsx(Q,{year:l})})},l))})}),e.jsx(P,{})]})},N=j.memo(M),re=()=>{const[n,t]=f("year",T.withDefault(D).withOptions({clearOnDefault:!1})),{getStatsUrl:o}=u(),{t:l}=h();return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:`${n} - ${l("medals_table")}`,description:l("year_description",{year:n}),url:o(n,!1)}),e.jsx(N,{year:n,setYear:t})]})};export{re as default};
