import{r,g as f}from"./react-BuJ6DvQi.js";import{ao as H,ap as y,aq as E,ar as C,as as x,at as A}from"./vendor-hSae87XV.js";const h=r.createContext(null);function v(t={}){const a=H({domOptions:{render:y(()=>E(a),i=>setTimeout(i,0))},...t});return a}function b({children:t,head:a}){return r.createElement(h.Provider,{value:a||v()},t)}function w(){const t=r.useContext(h);if(!t)throw new Error("useHead() was called without provide context.");return t}const M=({children:t,titleTemplate:a})=>{const i=w(),u=r.useMemo(()=>f.Children.toArray(t).filter(f.isValidElement),[t]),d=r.useCallback(()=>{const e={titleTemplate:a};for(const p of u){const m=p,{type:g,props:l}=m,s=String(g);if(!C.has(s))continue;const n={...typeof l=="object"?l:{}};if(x.has(s)&&n.children){const o=s==="script"?"innerHTML":"textContent";n[o]=Array.isArray(n.children)?n.children.map(String).join(""):String(n.children)}if(delete n.children,A.has(s)){const o=s;Array.isArray(e[o])||(e[o]=[]),e[o].push(n)}else e[s]=n}return e},[u,a]),c=r.useRef(i.push(d()));return r.useEffect(()=>()=>{var e;(e=c.current)!=null&&e.dispose&&c.current.dispose(),c.current=null},[]),r.useEffect(()=>{var e;(e=c.current)==null||e.patch(d())},[d]),null};export{M as H,b as U,v as c};
