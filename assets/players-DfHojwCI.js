const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/progress-DxfFC1kr.js","assets/about-DSTax99k.js","assets/clubs-39updRuA.js","assets/results-I2zKlKI9.js"])))=>i.map(i=>d[i]);
import{j as e,B as n,T as d,n as _,R as P,L as E,D as T,r as u,w as R,l as C,m as v}from"./about-DSTax99k.js";import{a as m,b,D as B,g,R as j,c as L,T as k,S as N,u as D,p as F,d as U,H as A,s as G,F as z}from"./clubs-39updRuA.js";const H="modulepreload",O=function(s){return"/"+s},$={},W=function(l,c,p){let a=Promise.resolve();if(c&&c.length>0){let x=function(o){return Promise.all(o.map(h=>Promise.resolve(h).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),t=r?.nonce||r?.getAttribute("nonce");a=x(c.map(o=>{if(o=O(o),o in $)return;$[o]=!0;const h=o.endsWith(".css"),y=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${y}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":H,h||(f.as="script"),f.crossOrigin="",f.href=o,t&&f.setAttribute("nonce",t),document.head.appendChild(f),h)return new Promise((w,S)=>{f.addEventListener("load",w),f.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${o}`)))})}))}function i(r){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=r,window.dispatchEvent(t),!t.defaultPrevented)throw r}return a.then(r=>{for(const t of r||[])t.status==="rejected"&&i(t.reason);return l().catch(i)})},q=({data:s})=>{const{getFederationUrl:l,getClubUrl:c,getCoachUrl:p}=m(),{t:a}=b(),i=B.currentYear(),r=()=>{L.event("external_link_click",{link_type:"fide_profile",type:"player",id:s.id,name:g(s)})};return e.jsxs(n,{display:"flex",sx:{flexDirection:{xs:"column",md:"row"},gap:4},children:[s.photo&&e.jsx(n,{display:"flex",justifyContent:"center",children:e.jsx(n,{component:"img",src:s.photo,alt:g(s),sx:{width:150,height:150,objectFit:"cover",borderRadius:"50%",boxShadow:2}})}),e.jsxs(n,{display:"flex",flexDirection:"column",flex:1,children:[s.id&&s.id>0&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(d,{variant:"body1",children:[a("fide"),":"]})}),e.jsx(n,{flexBasis:"50%",children:e.jsx(_,{href:`https://ratings.fide.com/profile/${s.id}`,onClick:r,variant:"body1",target:"_blank",rel:"noopener",children:s.id})})]}),s.yob&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(d,{variant:"body1",children:[a("year_of_birth"),":"]})}),e.jsxs(n,{display:"flex",flexBasis:"50%",gap:1,children:[e.jsx(d,{variant:"body1",children:s.yob}),e.jsx(d,{variant:"body1",color:"textSecondary",children:`(${i-s.yob} ${a("years")})`})]})]}),s.fed&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(d,{variant:"body1",children:[a("federation"),":"]})}),e.jsxs(n,{display:"flex",flexBasis:"50%",gap:1,children:[e.jsx(j,{to:l(s.fed),children:a(`federation_enum_short.${s.fed}`)}),s.fed2&&e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"body1",color:"textSecondary",children:"/"}),e.jsx(d,{variant:"body1",color:"textSecondary",children:g(s.fed2)})]})]})]}),s.clubs&&s.clubs.length>0&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(d,{variant:"body1",children:[a("club",{count:s.clubs.length}),":"]})}),e.jsx(n,{flexBasis:"50%",display:"flex",flexDirection:"column",children:s.clubs.map((t,x)=>{const o=g(t);return t.id?e.jsx(n,{alignSelf:"flex-start",children:e.jsx(j,{to:c(Number(t.id)),children:o})},x):e.jsx(d,{variant:"body1",children:o},x)})})]}),s.coaches&&s.coaches.length>0&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(d,{variant:"body1",children:[a("coach",{count:s.coaches.length}),":"]})}),e.jsx(n,{flexBasis:"50%",display:"flex",flexDirection:"column",children:s.coaches.map((t,x)=>{const o=g(t);return t.id?e.jsx(n,{alignSelf:"flex-start",children:e.jsx(j,{to:p(Number(t.id)),children:o})},x):e.jsx(d,{variant:"body1",children:o},x)})})]})]})]})},I=({results:s,yob:l})=>{const{t:c}=b(),{getTournamentUrl:p}=m(),a=(i,r,t,x,o)=>{const h=c(`type_enum_short.${i}`),y=c(`game_enum_short.${x}`),f=c(`gender_category.${o}.${t}`);return f?`${h} ${r} ${y} - ${f}`:`${h} ${r} ${y}`};return e.jsx(e.Fragment,{children:[...new Set(s.map(i=>i.rank))].map(i=>e.jsxs(n,{display:"flex",padding:2,gap:1,border:"1px solid #ddd",boxShadow:"0px 4px 6px rgba(63, 81, 181, 0.3)",bgcolor:i===1?"#ffffff":i===2?"#fcfcfc":i===3?"#f7f7f7":i===4?"#ededed":i===5?"#e5e5e5":"transparent",children:[e.jsx(n,{flexGrow:"auto",children:e.jsxs(d,{variant:"body1",children:[i,"."]})}),e.jsx(n,{flex:1,children:s.filter(r=>r.rank===i).map((r,t,x)=>e.jsxs(P.Fragment,{children:[e.jsx(E,{to:p(r.year,r.category,r.game,r.gender),style:{textDecoration:"none",color:"inherit"},children:e.jsxs(n,{display:"flex",flexDirection:"row",gap:1,sx:{"&:hover":{backgroundColor:"#f9f9f9"},borderRadius:"4px"},children:[e.jsx(n,{flexGrow:1,children:e.jsx(d,{variant:"body1",sx:{"&:hover":{textDecoration:"underline"}},color:r.type==k.UC?"textPrimary":"primary",children:a(r.type,r.year,r.category,r.game,r.gender)},"title")}),e.jsx(n,{children:e.jsx(d,{variant:"body1",color:"textSecondary",sx:{whiteSpace:"nowrap"},children:`${l?` ${r.year-l} ${c("years")}`:""}`},"year")})]})}),t<x.length-1&&e.jsx(T,{sx:{my:1}})]},t))})]},i))})},M="/",Y={async get(s){const l=N.encode(s.toString()),c=await fetch(`${M}api/players/${l}.json?v=47d09d2`);if(!c.ok)throw new Error(`Failed to get player (id=${s}) data`);return await c.json()}},K=u.lazy(()=>W(()=>import("./progress-DxfFC1kr.js"),__vite__mapDeps([0,1,2,3])));async function X({params:s}){return await Y.get(Number(s.id))}const Q=({params:s,loaderData:l})=>{const c=Number(s.id),[p,a]=D("tab",F.withDefault(0)),{getPlayerUrl:i}=m(),{t:r}=b(),t=u.useMemo(()=>g(l),[l]),x=u.useCallback((o,h)=>a(h),[a]);return e.jsxs(e.Fragment,{children:[e.jsx(U,{title:t,description:r("player_description"),url:i(c,!1)}),e.jsxs(n,{display:"flex",flexDirection:"column",padding:2,gap:1,boxSizing:"border-box",minHeight:"100vh",children:[e.jsx(A,{title:t}),e.jsx(q,{data:l}),e.jsxs(C,{value:p,onChange:x,children:[e.jsx(v,{label:r("results"),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),e.jsx(v,{label:r("progress"),sx:{minWidth:0,paddingRight:0,paddingLeft:0}})]}),e.jsxs(n,{display:"flex",flexDirection:"column",flexGrow:1,gap:1,children:[p===0&&e.jsx(I,{results:l.results,yob:l.yob}),p===1&&e.jsx(n,{width:"100%",height:400,children:e.jsx(u.Suspense,{fallback:e.jsx(G,{height:"100%"}),children:e.jsx(K,{results:l.results,yob:l.yob})})})]}),e.jsx(z,{})]})]})},Z=R(Q);export{Z as P,X as c};
