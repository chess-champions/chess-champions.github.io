import{r as D,n as y,j as e,B as t,p as L,T as I,R as S}from"./index-CQg9SaXJ.js";import{i as $,E,j as B,Y as b,t as v,p as C,q as z,S as A}from"./ChessDataService-DXh1EMIK.js";import{S as F,K as O,P,V as U,a as K,p as V}from"./swiper-react-DuNUAKci.js";import{u as R,S as a}from"./useNavigationService-CWTlSfpN.js";import{I as Y,R as g,H as G,F as H}from"./RouterLink-B2BBlmN_.js";import{K as W,a as q,C as Q,R as M}from"./ResultList-CGzprtWx.js";import{T as N,a as J,b as X,c as u,d,e as Z}from"./TableRow-B-aZzrXk.js";import{P as ee}from"./Paper-DGrQB4XX.js";import{T as se,a as p}from"./Tabs-DgqPltaa.js";import"./Divider-CeRK3UYK.js";import"./ownerWindow-B8kcSEJ-.js";const j=({group:n,year:c})=>{var k;const[o,x]=D.useState(),{getFederationUrl:r,getClubUrl:i,getCoachUrl:h,getPlayerUrl:T}=R(),{t:l,i18n:m}=y(),{data:_,isLoading:w,error:f}=$({queryKey:["stats",{group:n,year:c}],queryFn:async()=>await B.getStats(n,c)});return e.jsxs(t,{display:"flex",flexDirection:"column",flexGrow:"grow",marginBottom:4,sx:{overflow:"auto",height:"100%"},children:[w&&e.jsx(L,{}),f&&e.jsx(E,{message:f.message}),!w&&!f&&_&&e.jsx(N,{component:ee,children:e.jsxs(J,{stickyHeader:!0,sx:{"& th, & td":{padding:{xs:"6px 8px",sm:"6px 10px",md:"6px 12px",lg:"6px 16px"}}},children:[e.jsx(X,{children:e.jsxs(u,{children:[e.jsx(d,{}),e.jsx(d,{align:"left",children:e.jsxs(I,{children:[n==a.feds&&l("federation"),n==a.clubs&&l("club"),n==a.coaches&&l("coach"),n==a.players&&l("player")]})}),e.jsx(d,{children:e.jsxs(t,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(t,{sx:{display:{xs:"none",sm:"block"}},children:l("gold")}),e.jsx("img",{alt:l("gold"),width:"16",height:"16",src:"/gold.svg"})]})}),e.jsx(d,{children:e.jsxs(t,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(t,{sx:{display:{xs:"none",sm:"block"}},children:l("silver")}),e.jsx("img",{alt:l("silver"),width:"16",height:"16",src:"/silver.svg"})]})}),e.jsx(d,{children:e.jsxs(t,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(t,{sx:{display:{xs:"none",sm:"block"}},children:l("bronze")}),e.jsx("img",{alt:l("bronze"),width:"16",height:"16",src:"/bronze.svg"})]})}),e.jsx(d,{children:e.jsxs(t,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(t,{sx:{display:{xs:"none",sm:"block"}},children:l("total")}),e.jsx("img",{alt:l("total"),width:"16",height:"16",src:"/total.svg"})]})})]})}),e.jsx(Z,{children:(k=_.results)==null?void 0:k.map(s=>e.jsxs(S.Fragment,{children:[e.jsxs(u,{sx:{"& td":{borderBottom:"none"}},children:[e.jsx(d,{children:e.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(Y,{sx:{padding:"0px"},size:"small",onClick:()=>x(s.id===o?null:s.id),children:s.id===o?e.jsx(W,{}):e.jsx(q,{})}),s.rank,"."]})}),e.jsxs(d,{children:[s.id!==0&&n==a.feds&&e.jsx(g,{to:r(s.id),children:(m.resolvedLanguage==="uk"?s.name_uk:s.name_en)||s.name_uk||s.name_en||""}),s.id!==0&&n==a.clubs&&e.jsx(g,{to:i(s.id),children:(m.resolvedLanguage==="uk"?s.name_uk:s.name_en)||s.name_uk||s.name_en||""}),s.id!==0&&n==a.coaches&&e.jsx(g,{to:h(s.id),children:(m.resolvedLanguage==="uk"?s.name_uk:s.name_en)||s.name_uk||s.name_en||""}),s.id!==0&&n==a.players&&e.jsx(g,{to:T(s.id),children:(m.resolvedLanguage==="uk"?s.name_uk:s.name_en)||s.name_uk||s.name_en||""}),s.id===0&&((m.resolvedLanguage==="uk"?s.name_uk:s.name_en)||s.name_uk||s.name_en||"")]}),e.jsx(d,{align:"center",children:s.gold||0}),e.jsx(d,{align:"center",children:s.silver||0}),e.jsx(d,{align:"center",children:s.bronze||0}),e.jsx(d,{align:"center",children:(s.gold||0)+(s.silver||0)+(s.bronze||0)})]}),e.jsx(u,{children:e.jsx(d,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:e.jsx(Q,{in:s.id===o,timeout:"auto",unmountOnExit:!0,children:e.jsx(t,{marginTop:1,marginBottom:2,children:e.jsx(M,{group:n,groupId:s.id,year:c})})})})})]},`${c}_${s.id}`))})]})})]})},ae=({group:n,setGroup:c,year:o,setYear:x})=>{const{t:r}=y();return e.jsxs(t,{display:"flex",flexDirection:"column",height:"100vh",padding:2,gap:1,boxSizing:"border-box",overflow:"hidden",children:[e.jsx(G,{title:`${o} ${r("medals_table")}`}),e.jsxs(se,{value:n,onChange:(i,h)=>c(h),scrollButtons:"auto",children:[e.jsx(p,{label:r(`stats_group_enum.${a.feds}`),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),e.jsx(p,{label:r(`stats_group_enum.${a.clubs}`),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),e.jsx(p,{label:r(`stats_group_enum.${a.coaches}`),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),e.jsx(p,{label:r(`stats_group_enum.${a.players}`),sx:{minWidth:0,paddingRight:0,paddingLeft:0}})]}),e.jsx(t,{display:"flex",flexGrow:1,overflow:"hidden",height:"100%",children:e.jsx(F,{direction:"horizontal",initialSlide:b.indexOf(o),loop:!0,spaceBetween:10,slidesPerView:1,style:{width:"100%",height:"100%"},pagination:{clickable:!1},keyboard:{enabled:!0},onSlideChange:i=>{const h=b[i.realIndex];x(h)},virtual:{enabled:!0},modules:[O,P,U],children:b.map(i=>e.jsx(K,{"aria-hidden":o!==i,children:e.jsxs(t,{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%",children:[n===a.feds&&e.jsx(j,{group:a.feds,year:i}),n===a.clubs&&e.jsx(j,{group:a.clubs,year:i}),n===a.coaches&&e.jsx(j,{group:a.coaches,year:i}),n===a.players&&e.jsx(j,{group:a.players,year:i})]})},i))})}),e.jsx(H,{})]})},ne=S.memo(ae),pe=()=>{const[n,c]=v("group",V(a).withDefault(a.feds).withOptions({clearOnDefault:!1})),[o,x]=v("year",C.withDefault(z).withOptions({clearOnDefault:!1})),{getStatsUrl:r}=R(),{t:i}=y();return e.jsxs(e.Fragment,{children:[e.jsx(A,{title:`${o} - ${i("medals_table")} - ${i(`stats_group_enum.${n}`)}`,description:i("year_description",{year:o}),url:r(o,!1)}),e.jsx(ne,{group:n,setGroup:c,year:o,setYear:x})]})};export{pe as default};
