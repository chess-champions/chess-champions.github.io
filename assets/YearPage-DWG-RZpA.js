import{g as xe,b as he,r as w,c as ge,H as me,u as ue,I as fe,a as ye,j as e,s as K,d as je,e as we,m as ve,n as M,B as r,p as V,T as P,R as Q,L as be,t as Te}from"./index-C9GXLTPq.js";import{S as Se,K as Ee,P as ze,V as De,a as $e}from"./swiper-react-ujO8lW38.js";import{c as J,I as Ce,R as Re,H as Ie,F as Fe}from"./RouterLink-CwWyBoL7.js";import{T as Le,a as O,i as X,E as Z,j as ee,D as _e,S as Pe,Y}from"./ChessDataService-Bx2hIWHu.js";import{u as W,T as ke}from"./useNavigationService-DfBTYdGJ.js";import{D as Ue}from"./Divider-DUza6X8v.js";import{T as Ae,a as Ye,b as He,c as H,d as x,e as Be}from"./TableRow-B52Zd2V8.js";import{P as Ke}from"./Paper-DmXz6VBc.js";function Me(s){return xe("MuiCollapse",s)}he("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const We=s=>{const{orientation:t,classes:c}=s,p={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return we(p,Me,c)},Ne=K("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:c}=s;return[t.root,t[c.orientation],c.state==="entered"&&t.entered,c.state==="exited"&&!c.in&&c.collapsedSize==="0px"&&t.hidden]}})(ve(({theme:s})=>({height:0,overflow:"hidden",transition:s.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:s.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:t})=>t.state==="exited"&&!t.in&&t.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),qe=K("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(s,t)=>t.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Ge=K("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(s,t)=>t.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),B=w.forwardRef(function(t,c){const p=ge({props:t,name:"MuiCollapse"}),{addEndListener:a,children:d,className:g,collapsedSize:l="0px",component:u,easing:i,in:o,onEnter:f,onEntered:v,onEntering:C,onExit:T,onExited:R,onExiting:S,orientation:N="vertical",style:k,timeout:y=me.standard,TransitionComponent:ne=Le,...te}=p,I={...p,orientation:N,collapsedSize:l},E=We(I),q=ue(),ie=fe(),j=w.useRef(null),U=w.useRef(),F=typeof l=="number"?`${l}px`:l,z=N==="horizontal",D=z?"width":"height",L=w.useRef(null),se=ye(c,L),b=n=>h=>{if(n){const m=L.current;h===void 0?n(m):n(m,h)}},A=()=>j.current?j.current[z?"clientWidth":"clientHeight"]:0,re=b((n,h)=>{j.current&&z&&(j.current.style.position="absolute"),n.style[D]=F,f&&f(n,h)}),oe=b((n,h)=>{const m=A();j.current&&z&&(j.current.style.position="");const{duration:$,easing:_}=O({style:k,timeout:y,easing:i},{mode:"enter"});if(y==="auto"){const G=q.transitions.getAutoHeightDuration(m);n.style.transitionDuration=`${G}ms`,U.current=G}else n.style.transitionDuration=typeof $=="string"?$:`${$}ms`;n.style[D]=`${m}px`,n.style.transitionTimingFunction=_,C&&C(n,h)}),ae=b((n,h)=>{n.style[D]="auto",v&&v(n,h)}),le=b(n=>{n.style[D]=`${A()}px`,T&&T(n)}),de=b(R),ce=b(n=>{const h=A(),{duration:m,easing:$}=O({style:k,timeout:y,easing:i},{mode:"exit"});if(y==="auto"){const _=q.transitions.getAutoHeightDuration(h);n.style.transitionDuration=`${_}ms`,U.current=_}else n.style.transitionDuration=typeof m=="string"?m:`${m}ms`;n.style[D]=F,n.style.transitionTimingFunction=$,S&&S(n)}),pe=n=>{y==="auto"&&ie.start(U.current||0,n),a&&a(L.current,n)};return e.jsx(ne,{in:o,onEnter:re,onEntered:ae,onEntering:oe,onExit:le,onExited:de,onExiting:ce,addEndListener:pe,nodeRef:L,timeout:y==="auto"?null:y,...te,children:(n,h)=>e.jsx(Ne,{as:u,className:je(E.root,g,{entered:E.entered,exited:!o&&F==="0px"&&E.hidden}[n]),style:{[z?"minWidth":"minHeight"]:F,...k},ref:se,...h,ownerState:{...I,state:n},children:e.jsx(qe,{ownerState:{...I,state:n},className:E.wrapper,ref:j,children:e.jsx(Ge,{ownerState:{...I,state:n},className:E.wrapperInner,children:d})})})})});B&&(B.muiSupportAuto=!0);const Oe=J(e.jsx("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"}),"KeyboardArrowDown"),Ve=J(e.jsx("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp"),Qe=({year:s,federation:t})=>{const{getTournamentUrl:c}=W(),{t:p,i18n:a}=M(),d=(i,o,f,v,C)=>{const T=p(`type_enum_short.${i}`),R=p(`game_enum_short.${v}`),S=p(`gender_category.${C}.${f}`);return S?`${T} ${o} ${R} - ${S}`:`${T} ${o} ${R}`},{data:g,isLoading:l,error:u}=X({queryKey:["yearFederations",{year:s,federation:t}],queryFn:async()=>await ee.getYearFederation(s,t)});return e.jsxs(r,{display:"flex",flexDirection:"column",gap:1,children:[l&&e.jsx(V,{}),u&&e.jsx(Z,{message:u.message}),!l&&!u&&g&&[...new Set(g.results.map(i=>i.rank))].map(i=>e.jsxs(r,{display:"flex",padding:2,gap:1,border:"1px solid #ddd",boxShadow:"0px 4px 6px rgba(63, 81, 181, 0.3)",bgcolor:i<=3?"white":"",children:[e.jsx(r,{flexGrow:"auto",children:e.jsxs(P,{variant:"body1",children:[i,"."]})}),e.jsx(r,{flex:1,children:g.results.filter(o=>o.rank===i).map((o,f,v)=>e.jsxs(Q.Fragment,{children:[e.jsx(be,{to:c(s,o.category,o.game,o.gender),style:{textDecoration:"none",color:"inherit"},children:e.jsxs(r,{display:"flex",flexDirection:"row",gap:1,sx:{"&:hover":{backgroundColor:"#f9f9f9"},borderRadius:"4px"},children:[e.jsx(r,{flexGrow:1,children:e.jsx(P,{variant:"body1",sx:{"&:hover":{textDecoration:"underline"}},color:o.type==ke.UC?"textPrimary":"primary",children:d(o.type,s,o.category,o.game,o.gender)},"title")}),e.jsx(r,{children:e.jsx(P,{variant:"body1",color:"textSecondary",sx:{whiteSpace:"nowrap"},children:(a.resolvedLanguage==="uk"?o.name_uk:o.name_en)||o.name_uk||o.name_en||""},"year")})]})}),f<v.length-1&&e.jsx(Ue,{sx:{my:1}})]},f))})]},i))]})},Je=({id:s})=>{var u;const[t,c]=w.useState(null),{getFederationUrl:p}=W(),{t:a}=M(),{data:d,isLoading:g,error:l}=X({queryKey:["years",{id:s}],queryFn:async()=>await ee.getYear(s)});return e.jsxs(r,{display:"flex",flexDirection:"column",flexGrow:"grow",marginBottom:4,sx:{overflow:"auto",height:"100%"},children:[g&&e.jsx(V,{}),l&&e.jsx(Z,{message:l.message}),!g&&!l&&d&&e.jsx(Ae,{component:Ke,children:e.jsxs(Ye,{size:"small",children:[e.jsx(He,{children:e.jsxs(H,{children:[e.jsx(x,{}),e.jsx(x,{align:"left",children:e.jsx(P,{children:a("federation")})}),e.jsx(x,{children:e.jsxs(r,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(r,{sx:{display:{xs:"none",sm:"block"}},children:a("gold")}),e.jsx("img",{alt:a("gold"),width:"16",height:"16",src:"/gold.svg"})]})}),e.jsx(x,{children:e.jsxs(r,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(r,{sx:{display:{xs:"none",sm:"block"}},children:a("silver")}),e.jsx("img",{alt:a("silver"),width:"16",height:"16",src:"/silver.svg"})]})}),e.jsx(x,{children:e.jsxs(r,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(r,{sx:{display:{xs:"none",sm:"block"}},children:a("bronze")}),e.jsx("img",{alt:a("bronze"),width:"16",height:"16",src:"/bronze.svg"})]})}),e.jsx(x,{children:e.jsxs(r,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(r,{sx:{display:{xs:"none",sm:"block"}},children:a("total")}),e.jsx("img",{alt:a("total"),width:"16",height:"16",src:"/total.svg"})]})})]})}),e.jsx(Be,{children:(u=d.results)==null?void 0:u.map(i=>e.jsxs(Q.Fragment,{children:[e.jsxs(H,{children:[e.jsx(x,{children:e.jsx(r,{display:"flex",alignItems:"center",children:e.jsx(Ce,{size:"small",onClick:()=>c(i.fed===t?null:i.fed),children:i.fed===t?e.jsx(Ve,{}):e.jsx(Oe,{})})})}),e.jsx(x,{children:i.fed&&e.jsx(Re,{to:p(i.fed),children:a(`federation_enum_short.${i.fed}`)})}),e.jsx(x,{align:"center",children:i.gold||0}),e.jsx(x,{align:"center",children:i.silver||0}),e.jsx(x,{align:"center",children:i.bronze||0}),e.jsx(x,{align:"center",children:(i.gold||0)+(i.silver||0)+(i.bronze||0)})]}),e.jsx(H,{children:e.jsx(x,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:e.jsx(B,{in:i.fed===t,timeout:"auto",unmountOnExit:!0,children:e.jsx(r,{marginTop:2,marginBottom:2,children:e.jsx(Qe,{year:s,federation:i.fed})})})})})]},`${s}_${i.fed}`))})]})})]})},an=()=>{const[s]=Te(),{getYearUrl:t,navigateToYear:c}=W(),{t:p}=M(),a=parseInt(s.get("id")||"")||_e,[d,g]=w.useState(a);return w.useEffect(()=>{a!=d&&c(d,!0)},[d]),e.jsxs(e.Fragment,{children:[e.jsx(Pe,{title:`${d} - ${p("medals_table")}`,description:p("year_description",{year:d}),url:t(d,!1)}),e.jsxs(r,{display:"flex",flexDirection:"column",height:"100vh",padding:2,gap:1,boxSizing:"border-box",overflow:"hidden",children:[e.jsx(Ie,{title:`${d} ${p("medals_table")}`}),e.jsx(r,{display:"flex",flexGrow:1,overflow:"hidden",height:"100%",children:e.jsx(Se,{direction:"horizontal",initialSlide:Y.indexOf(d),loop:!0,spaceBetween:10,slidesPerView:1,style:{width:"100%",height:"100%"},pagination:{clickable:!1},keyboard:{enabled:!0},onSlideChange:l=>{g(Y[l.realIndex])},virtual:{enabled:!0},modules:[Ee,ze,De],children:Y.map(l=>e.jsx($e,{"aria-hidden":d!==l,children:e.jsx(r,{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%",children:e.jsx(Je,{id:l})})},l))})}),e.jsx(Fe,{})]})]})};export{an as default};
