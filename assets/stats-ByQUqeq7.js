import{j as s,B as g,a as h,b as d}from"./mui-CXhE_iE7.js";import{a as m}from"./react-Bs57X6Ch.js";import{S as j,L as b,E as w,H as y,Y as x,F as S,u,e as $,p as R,r as _,a as F,c as L}from"./shared-K9ByXCw_.js";import{S as v,K as D,P as A,V as O,a as T}from"./swiper-BWAETjh8.js";import{R as l,M as Y}from"./results-XTHtP9A9.js";import{u as B}from"./query-DeXAFL7x.js";import{u as f}from"./localization-BTb5j_W4.js";import"./analytics-HyNrjKFN.js";import"./utils-BT3gc4jm.js";var a=(e=>(e[e.feds=0]="feds",e[e.clubs=1]="clubs",e[e.coaches=2]="coaches",e[e.players=3]="players",e))(a||{});const P="/",V={async getStats(e,r){const i=j.encode(r.toString()),o=await fetch(`${P}api/stats/${a[e]}/${i}.json?v=c9eb558`);if(!o.ok)throw new Error(`Failed to get year (${r}) stats`);return await o.json()}},c=({group:e,year:r})=>{const i={[a.feds]:l.Federation,[a.clubs]:l.Club,[a.coaches]:l.Coach,[a.players]:l.Player},{data:o,isLoading:n,error:t}=B({queryKey:["stats",{group:e,year:r}],queryFn:async()=>await V.getStats(e,r)});return s.jsxs(g,{display:"flex",flexDirection:"column",flexGrow:"grow",marginBottom:4,sx:{overflow:"auto",height:"100%"},children:[n&&s.jsx(b,{}),t&&s.jsx(w,{message:t.message}),!n&&!t&&o&&s.jsx(Y,{filterField:l.Year,filterId:r,groupField:i[e],results:o.results})]})},C=({group:e,setGroup:r,year:i,setYear:o})=>{const{t:n}=f();return s.jsxs(g,{display:"flex",flexDirection:"column",padding:2,gap:1,boxSizing:"border-box",children:[s.jsx(y,{title:`${i} ${n("medals_table")}`}),s.jsxs(h,{value:e,onChange:(t,p)=>r(p),children:[s.jsx(d,{label:n(`stats_group_enum.${a.feds}`),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),s.jsx(d,{label:n(`stats_group_enum.${a.clubs}`),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),s.jsx(d,{label:n(`stats_group_enum.${a.coaches}`),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),s.jsx(d,{label:n(`stats_group_enum.${a.players}`),sx:{minWidth:0,paddingRight:0,paddingLeft:0}})]}),s.jsx(g,{display:"flex",flexGrow:1,children:s.jsx(v,{direction:"horizontal",initialSlide:x.indexOf(i),loop:!0,spaceBetween:10,slidesPerView:1,style:{width:"100%",height:"100%"},pagination:{clickable:!1},keyboard:{enabled:!0},onSlideChange:t=>{const p=x[t.realIndex];o(p)},virtual:{enabled:!0},modules:[D,A,O],children:x.map(t=>s.jsx(T,{"aria-hidden":i!==t,children:s.jsxs(g,{display:"flex",flexDirection:"column",children:[e===a.feds&&s.jsx(c,{group:a.feds,year:t}),e===a.clubs&&s.jsx(c,{group:a.clubs,year:t}),e===a.coaches&&s.jsx(c,{group:a.coaches,year:t}),e===a.players&&s.jsx(c,{group:a.players,year:t})]})},t))})}),s.jsx(S,{})]})},E=m.memo(C),Q=()=>{const[e,r]=u("group",$(a).withDefault(a.feds).withOptions({clearOnDefault:!1})),[i,o]=u("year",R.withDefault(_).withOptions({clearOnDefault:!1})),{getStatsUrl:n}=F(),{t}=f();return s.jsxs(s.Fragment,{children:[s.jsx(L,{title:`${i} - ${t("medals_table")} - ${t(`stats_group_enum.${e}`)}`,description:t("year_description",{year:i}),url:n(i,!1)}),s.jsx(E,{group:e,setGroup:r,year:i,setYear:o})]})};export{Q as StatsPage};
