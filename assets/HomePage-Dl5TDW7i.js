import{r as c,u as ct,a as J,j as u,g as oe,b as V,c as se,d as H,s as K,e as re,f as Ae,m as tt,h as nt,i as ot,k as dt,l as xe,R as me,n as Z,B as U,o as ye,L as ut,T as z,p as ft,q as pt,t as mt,G as be}from"./index-BPvzYw0I.js";import{P as ht,S as gt,K as xt,a as bt,V as vt,b as yt}from"./swiper-react-n8iOjuLv.js";import{u as Le,C as Et,G as Pt,a as Rt}from"./useNavigationService-DHdSXDw1.js";import{T as Tt,g as st,a as Be,r as Ct,u as ne,o as W,e as St,P as wt,G as Mt,b as kt,c as _e,d as he,C as It,f as jt,h as Lt,S as Nt,i as $t,E as Ft,j as Ot,Y as fe,D as Dt,k as Se,l as At,m as Bt,n as _t,p as Gt,L as Ut}from"./ChessDataService-BM5U_9sW.js";import{o as Q,d as Kt,a as Ge,L as zt,P as le}from"./Link-DwdkrWod.js";function Ue(...e){return e.reduce((t,n)=>n==null?t:function(...r){t.apply(this,r),n.apply(this,r)},()=>{})}function rt(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function Ht(e){return typeof e=="string"}const Wt={entering:{opacity:1},entered:{opacity:1}},Yt=c.forwardRef(function(t,n){const o=ct(),r={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{addEndListener:i,appear:l=!0,children:a,easing:m,in:g,onEnter:E,onEntered:b,onEntering:C,onExit:p,onExited:x,onExiting:k,style:S,timeout:h=r,TransitionComponent:f=Tt,...s}=t,d=c.useRef(null),P=J(d,st(a),n),w=I=>T=>{if(I){const v=d.current;T===void 0?I(v):I(v,T)}},M=w(C),R=w((I,T)=>{Ct(I);const v=Be({style:S,timeout:h,easing:m},{mode:"enter"});I.style.webkitTransition=o.transitions.create("opacity",v),I.style.transition=o.transitions.create("opacity",v),E&&E(I,T)}),y=w(b),L=w(k),$=w(I=>{const T=Be({style:S,timeout:h,easing:m},{mode:"exit"});I.style.webkitTransition=o.transitions.create("opacity",T),I.style.transition=o.transitions.create("opacity",T),p&&p(I)}),D=w(x),A=I=>{i&&i(d.current,I)};return u.jsx(f,{appear:l,in:g,nodeRef:d,onEnter:R,onEntered:y,onEntering:M,onExit:$,onExited:D,onExiting:L,addEndListener:A,timeout:h,...s,children:(I,T)=>c.cloneElement(a,{style:{opacity:0,visibility:I==="exited"&&!g?"hidden":void 0,...Wt[I],...S,...a.props.style},ref:P,...T})})});function Vt(e){return oe("MuiBackdrop",e)}V("MuiBackdrop",["root","invisible"]);const qt=e=>{const{ownerState:t,...n}=e;return n},Xt=e=>{const{classes:t,invisible:n}=e;return re({root:["root",n&&"invisible"]},Vt,t)},Qt=K("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Jt=c.forwardRef(function(t,n){const o=se({props:t,name:"MuiBackdrop"}),{children:r,className:i,component:l="div",invisible:a=!1,open:m,components:g={},componentsProps:E={},slotProps:b={},slots:C={},TransitionComponent:p,transitionDuration:x,...k}=o,S={...o,component:l,invisible:a},h=Xt(S),f={transition:p,root:g.Root,...C},s={...E,...b},d={slots:f,slotProps:s},[P,w]=ne("root",{elementType:Qt,externalForwardedProps:d,className:H(h.root,i),ownerState:S}),[M,R]=ne("transition",{elementType:Yt,externalForwardedProps:d,ownerState:S}),y=qt(R);return u.jsx(M,{in:m,timeout:x,...k,...y,children:u.jsx(P,{"aria-hidden":!0,...w,classes:h,ref:n,children:r})})});function Zt(e){const t=W(e);return t.body===e?Q(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function pe(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Ke(e){return parseInt(Q(e).getComputedStyle(e).paddingRight,10)||0}function en(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),o=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||o}function ze(e,t,n,o,r){const i=[t,n,...o];[].forEach.call(e.children,l=>{const a=!i.includes(l),m=!en(l);a&&m&&pe(l,r)})}function we(e,t){let n=-1;return e.some((o,r)=>t(o)?(n=r,!0):!1),n}function tn(e,t){const n=[],o=e.container;if(!t.disableScrollLock){if(Zt(o)){const l=rt(Q(o));n.push({value:o.style.paddingRight,property:"padding-right",el:o}),o.style.paddingRight=`${Ke(o)+l}px`;const a=W(o).querySelectorAll(".mui-fixed");[].forEach.call(a,m=>{n.push({value:m.style.paddingRight,property:"padding-right",el:m}),m.style.paddingRight=`${Ke(m)+l}px`})}let i;if(o.parentNode instanceof DocumentFragment)i=W(o).body;else{const l=o.parentElement,a=Q(o);i=(l==null?void 0:l.nodeName)==="HTML"&&a.getComputedStyle(l).overflowY==="scroll"?l:o}n.push({value:i.style.overflow,property:"overflow",el:i},{value:i.style.overflowX,property:"overflow-x",el:i},{value:i.style.overflowY,property:"overflow-y",el:i}),i.style.overflow="hidden"}return()=>{n.forEach(({value:i,el:l,property:a})=>{i?l.style.setProperty(a,i):l.style.removeProperty(a)})}}function nn(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class on{constructor(){this.modals=[],this.containers=[]}add(t,n){let o=this.modals.indexOf(t);if(o!==-1)return o;o=this.modals.length,this.modals.push(t),t.modalRef&&pe(t.modalRef,!1);const r=nn(n);ze(n,t.mount,t.modalRef,r,!0);const i=we(this.containers,l=>l.container===n);return i!==-1?(this.containers[i].modals.push(t),o):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:r}),o)}mount(t,n){const o=we(this.containers,i=>i.modals.includes(t)),r=this.containers[o];r.restore||(r.restore=tn(r,n))}remove(t,n=!0){const o=this.modals.indexOf(t);if(o===-1)return o;const r=we(this.containers,l=>l.modals.includes(t)),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(t),1),this.modals.splice(o,1),i.modals.length===0)i.restore&&i.restore(),t.modalRef&&pe(t.modalRef,n),ze(i.container,t.mount,t.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const l=i.modals[i.modals.length-1];l.modalRef&&pe(l.modalRef,!1)}return o}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const sn=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function rn(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function an(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=o=>e.ownerDocument.querySelector(`input[type="radio"]${o}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function ln(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||an(e))}function cn(e){const t=[],n=[];return Array.from(e.querySelectorAll(sn)).forEach((o,r)=>{const i=rn(o);i===-1||!ln(o)||(i===0?t.push(o):n.push({documentOrder:r,tabIndex:i,node:o}))}),n.sort((o,r)=>o.tabIndex===r.tabIndex?o.documentOrder-r.documentOrder:o.tabIndex-r.tabIndex).map(o=>o.node).concat(t)}function dn(){return!0}function un(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:o=!1,disableRestoreFocus:r=!1,getTabbable:i=cn,isEnabled:l=dn,open:a}=e,m=c.useRef(!1),g=c.useRef(null),E=c.useRef(null),b=c.useRef(null),C=c.useRef(null),p=c.useRef(!1),x=c.useRef(null),k=J(st(t),x),S=c.useRef(null);c.useEffect(()=>{!a||!x.current||(p.current=!n)},[n,a]),c.useEffect(()=>{if(!a||!x.current)return;const s=W(x.current);return x.current.contains(s.activeElement)||(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex","-1"),p.current&&x.current.focus()),()=>{r||(b.current&&b.current.focus&&(m.current=!0,b.current.focus()),b.current=null)}},[a]),c.useEffect(()=>{if(!a||!x.current)return;const s=W(x.current),d=M=>{S.current=M,!(o||!l()||M.key!=="Tab")&&s.activeElement===x.current&&M.shiftKey&&(m.current=!0,E.current&&E.current.focus())},P=()=>{var y,L;const M=x.current;if(M===null)return;if(!s.hasFocus()||!l()||m.current){m.current=!1;return}if(M.contains(s.activeElement)||o&&s.activeElement!==g.current&&s.activeElement!==E.current)return;if(s.activeElement!==C.current)C.current=null;else if(C.current!==null)return;if(!p.current)return;let R=[];if((s.activeElement===g.current||s.activeElement===E.current)&&(R=i(x.current)),R.length>0){const $=!!((y=S.current)!=null&&y.shiftKey&&((L=S.current)==null?void 0:L.key)==="Tab"),D=R[0],A=R[R.length-1];typeof D!="string"&&typeof A!="string"&&($?A.focus():D.focus())}else M.focus()};s.addEventListener("focusin",P),s.addEventListener("keydown",d,!0);const w=setInterval(()=>{s.activeElement&&s.activeElement.tagName==="BODY"&&P()},50);return()=>{clearInterval(w),s.removeEventListener("focusin",P),s.removeEventListener("keydown",d,!0)}},[n,o,r,l,a,i]);const h=s=>{b.current===null&&(b.current=s.relatedTarget),p.current=!0,C.current=s.target;const d=t.props.onFocus;d&&d(s)},f=s=>{b.current===null&&(b.current=s.relatedTarget),p.current=!0};return u.jsxs(c.Fragment,{children:[u.jsx("div",{tabIndex:a?0:-1,onFocus:f,ref:g,"data-testid":"sentinelStart"}),c.cloneElement(t,{ref:k,onFocus:h}),u.jsx("div",{tabIndex:a?0:-1,onFocus:f,ref:E,"data-testid":"sentinelEnd"})]})}function fn(e){return typeof e=="function"?e():e}function pn(e){return e?e.props.hasOwnProperty("in"):!1}const He=()=>{},ve=new on;function mn(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:o=!1,closeAfterTransition:r=!1,onTransitionEnter:i,onTransitionExited:l,children:a,onClose:m,open:g,rootRef:E}=e,b=c.useRef({}),C=c.useRef(null),p=c.useRef(null),x=J(p,E),[k,S]=c.useState(!g),h=pn(a);let f=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(f=!1);const s=()=>W(C.current),d=()=>(b.current.modalRef=p.current,b.current.mount=C.current,b.current),P=()=>{ve.mount(d(),{disableScrollLock:o}),p.current&&(p.current.scrollTop=0)},w=Ae(()=>{const T=fn(t)||s().body;ve.add(d(),T),p.current&&P()}),M=()=>ve.isTopModal(d()),R=Ae(T=>{C.current=T,T&&(g&&M()?P():p.current&&pe(p.current,f))}),y=c.useCallback(()=>{ve.remove(d(),f)},[f]);c.useEffect(()=>()=>{y()},[y]),c.useEffect(()=>{g?w():(!h||!r)&&y()},[g,y,h,r,w]);const L=T=>v=>{var F;(F=T.onKeyDown)==null||F.call(T,v),!(v.key!=="Escape"||v.which===229||!M())&&(n||(v.stopPropagation(),m&&m(v,"escapeKeyDown")))},$=T=>v=>{var F;(F=T.onClick)==null||F.call(T,v),v.target===v.currentTarget&&m&&m(v,"backdropClick")};return{getRootProps:(T={})=>{const v=St(e);delete v.onTransitionEnter,delete v.onTransitionExited;const F={...v,...T};return{role:"presentation",...F,onKeyDown:L(F),ref:x}},getBackdropProps:(T={})=>{const v=T;return{"aria-hidden":!0,...v,onClick:$(v),open:g}},getTransitionProps:()=>{const T=()=>{S(!1),i&&i()},v=()=>{S(!0),l&&l(),r&&y()};return{onEnter:Ue(T,(a==null?void 0:a.props.onEnter)??He),onExited:Ue(v,(a==null?void 0:a.props.onExited)??He)}},rootRef:x,portalRef:R,isTopModal:M,exited:k,hasTransition:h}}function hn(e){return oe("MuiModal",e)}V("MuiModal",["root","hidden","backdrop"]);const gn=e=>{const{open:t,exited:n,classes:o}=e;return re({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},hn,o)},xn=K("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(tt(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),bn=K(Jt,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),vn=c.forwardRef(function(t,n){const o=se({name:"MuiModal",props:t}),{BackdropComponent:r=bn,BackdropProps:i,classes:l,className:a,closeAfterTransition:m=!1,children:g,container:E,component:b,components:C={},componentsProps:p={},disableAutoFocus:x=!1,disableEnforceFocus:k=!1,disableEscapeKeyDown:S=!1,disablePortal:h=!1,disableRestoreFocus:f=!1,disableScrollLock:s=!1,hideBackdrop:d=!1,keepMounted:P=!1,onBackdropClick:w,onClose:M,onTransitionEnter:R,onTransitionExited:y,open:L,slotProps:$={},slots:D={},theme:A,...I}=o,T={...o,closeAfterTransition:m,disableAutoFocus:x,disableEnforceFocus:k,disableEscapeKeyDown:S,disablePortal:h,disableRestoreFocus:f,disableScrollLock:s,hideBackdrop:d,keepMounted:P},{getRootProps:v,getBackdropProps:F,getTransitionProps:B,portalRef:Ee,isTopModal:Pe,exited:ie,hasTransition:ge}=mn({...T,rootRef:n}),Y={...T,exited:ie},_=gn(Y),q={};if(g.props.tabIndex===void 0&&(q.tabIndex="-1"),ge){const{onEnter:N,onExited:X}=B();q.onEnter=N,q.onExited=X}const ae={...I,slots:{root:C.Root,backdrop:C.Backdrop,...D},slotProps:{...p,...$}},[Re,Te]=ne("root",{elementType:xn,externalForwardedProps:ae,getSlotProps:v,additionalProps:{ref:n,as:b},ownerState:Y,className:H(a,_==null?void 0:_.root,!Y.open&&Y.exited&&(_==null?void 0:_.hidden))}),[Ce,j]=ne("backdrop",{elementType:r,externalForwardedProps:ae,additionalProps:i,getSlotProps:N=>F({...N,onClick:X=>{w&&w(X),N!=null&&N.onClick&&N.onClick(X)}}),className:H(i==null?void 0:i.className,_==null?void 0:_.backdrop),ownerState:Y}),O=J(i==null?void 0:i.ref,j.ref);return!P&&!L&&(!ge||ie)?null:u.jsx(wt,{ref:Ee,container:E,disablePortal:h,children:u.jsxs(Re,{...Te,children:[!d&&r?u.jsx(Ce,{...j,ref:O}):null,u.jsx(un,{disableEnforceFocus:k,disableAutoFocus:x,disableRestoreFocus:f,isEnabled:Pe,open:L,children:c.cloneElement(g,q)})]})})}),Ie=c.createContext({});function yn(e){return oe("MuiList",e)}V("MuiList",["root","padding","dense","subheader"]);const En=e=>{const{classes:t,disablePadding:n,dense:o,subheader:r}=e;return re({root:["root",!n&&"padding",o&&"dense",r&&"subheader"]},yn,t)},Pn=K("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),Rn=c.forwardRef(function(t,n){const o=se({props:t,name:"MuiList"}),{children:r,className:i,component:l="ul",dense:a=!1,disablePadding:m=!1,subheader:g,...E}=o,b=c.useMemo(()=>({dense:a}),[a]),C={...o,component:l,dense:a,disablePadding:m},p=En(C);return u.jsx(Ie.Provider,{value:b,children:u.jsxs(Pn,{as:l,className:H(p.root,i),ref:n,ownerState:C,...E,children:[g,r]})})}),We=V("MuiListItemIcon",["root","alignItemsFlexStart"]),Ye=V("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function Me(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function Ve(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function it(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join(""))}function ce(e,t,n,o,r,i){let l=!1,a=r(e,t,t?n:!1);for(;a;){if(a===e.firstChild){if(l)return!1;l=!0}const m=o?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!it(a,i)||m)a=r(e,a,n);else return a.focus(),!0}return!1}const Tn=c.forwardRef(function(t,n){const{actions:o,autoFocus:r=!1,autoFocusItem:i=!1,children:l,className:a,disabledItemsFocusable:m=!1,disableListWrap:g=!1,onKeyDown:E,variant:b="selectedMenu",...C}=t,p=c.useRef(null),x=c.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});nt(()=>{r&&p.current.focus()},[r]),c.useImperativeHandle(o,()=>({adjustStyleForScrollbar:(s,{direction:d})=>{const P=!p.current.style.width;if(s.clientHeight<p.current.clientHeight&&P){const w=`${rt(Q(s))}px`;p.current.style[d==="rtl"?"paddingLeft":"paddingRight"]=w,p.current.style.width=`calc(100% + ${w})`}return p.current}}),[]);const k=s=>{const d=p.current,P=s.key;if(s.ctrlKey||s.metaKey||s.altKey){E&&E(s);return}const M=W(d).activeElement;if(P==="ArrowDown")s.preventDefault(),ce(d,M,g,m,Me);else if(P==="ArrowUp")s.preventDefault(),ce(d,M,g,m,Ve);else if(P==="Home")s.preventDefault(),ce(d,null,g,m,Me);else if(P==="End")s.preventDefault(),ce(d,null,g,m,Ve);else if(P.length===1){const R=x.current,y=P.toLowerCase(),L=performance.now();R.keys.length>0&&(L-R.lastTime>500?(R.keys=[],R.repeating=!0,R.previousKeyMatched=!0):R.repeating&&y!==R.keys[0]&&(R.repeating=!1)),R.lastTime=L,R.keys.push(y);const $=M&&!R.repeating&&it(M,R);R.previousKeyMatched&&($||ce(d,M,!1,m,Me,R))?s.preventDefault():R.previousKeyMatched=!1}E&&E(s)},S=J(p,n);let h=-1;c.Children.forEach(l,(s,d)=>{if(!c.isValidElement(s)){h===d&&(h+=1,h>=l.length&&(h=-1));return}s.props.disabled||(b==="selectedMenu"&&s.props.selected||h===-1)&&(h=d),h===d&&(s.props.disabled||s.props.muiSkipListHighlight||s.type.muiSkipListHighlight)&&(h+=1,h>=l.length&&(h=-1))});const f=c.Children.map(l,(s,d)=>{if(d===h){const P={};return i&&(P.autoFocus=!0),s.props.tabIndex===void 0&&b==="selectedMenu"&&(P.tabIndex=0),c.cloneElement(s,P)}return s});return u.jsx(Rn,{role:"menu",ref:S,className:a,onKeyDown:k,tabIndex:r?0:-1,...C,children:f})});function Cn(e){return oe("MuiPopover",e)}V("MuiPopover",["root","paper"]);function qe(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function Xe(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function Qe(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function ke(e){return typeof e=="function"?e():e}const Sn=e=>{const{classes:t}=e;return re({root:["root"],paper:["paper"]},Cn,t)},wn=K(vn,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),at=K(ht,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Mn=c.forwardRef(function(t,n){const o=se({props:t,name:"MuiPopover"}),{action:r,anchorEl:i,anchorOrigin:l={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:m="anchorEl",children:g,className:E,container:b,elevation:C=8,marginThreshold:p=16,open:x,PaperProps:k={},slots:S={},slotProps:h={},transformOrigin:f={vertical:"top",horizontal:"left"},TransitionComponent:s=Mt,transitionDuration:d="auto",TransitionProps:{onEntering:P,...w}={},disableScrollLock:M=!1,...R}=o,y=(h==null?void 0:h.paper)??k,L=c.useRef(),$={...o,anchorOrigin:l,anchorReference:m,elevation:C,marginThreshold:p,externalPaperSlotProps:y,transformOrigin:f,TransitionComponent:s,transitionDuration:d,TransitionProps:w},D=Sn($),A=c.useCallback(()=>{if(m==="anchorPosition")return a;const j=ke(i),N=(j&&j.nodeType===1?j:W(L.current).body).getBoundingClientRect();return{top:N.top+qe(N,l.vertical),left:N.left+Xe(N,l.horizontal)}},[i,l.horizontal,l.vertical,a,m]),I=c.useCallback(j=>({vertical:qe(j,f.vertical),horizontal:Xe(j,f.horizontal)}),[f.horizontal,f.vertical]),T=c.useCallback(j=>{const O={width:j.offsetWidth,height:j.offsetHeight},N=I(O);if(m==="none")return{top:null,left:null,transformOrigin:Qe(N)};const X=A();let ee=X.top-N.vertical,te=X.left-N.horizontal;const Ne=ee+O.height,$e=te+O.width,Fe=Q(ke(i)),Oe=Fe.innerHeight-p,De=Fe.innerWidth-p;if(p!==null&&ee<p){const G=ee-p;ee-=G,N.vertical+=G}else if(p!==null&&Ne>Oe){const G=Ne-Oe;ee-=G,N.vertical+=G}if(p!==null&&te<p){const G=te-p;te-=G,N.horizontal+=G}else if($e>De){const G=$e-De;te-=G,N.horizontal+=G}return{top:`${Math.round(ee)}px`,left:`${Math.round(te)}px`,transformOrigin:Qe(N)}},[i,m,A,I,p]),[v,F]=c.useState(x),B=c.useCallback(()=>{const j=L.current;if(!j)return;const O=T(j);O.top!==null&&j.style.setProperty("top",O.top),O.left!==null&&(j.style.left=O.left),j.style.transformOrigin=O.transformOrigin,F(!0)},[T]);c.useEffect(()=>(M&&window.addEventListener("scroll",B),()=>window.removeEventListener("scroll",B)),[i,M,B]);const Ee=(j,O)=>{P&&P(j,O),B()},Pe=()=>{F(!1)};c.useEffect(()=>{x&&B()}),c.useImperativeHandle(r,()=>x?{updatePosition:()=>{B()}}:null,[x,B]),c.useEffect(()=>{if(!x)return;const j=Kt(()=>{B()}),O=Q(i);return O.addEventListener("resize",j),()=>{j.clear(),O.removeEventListener("resize",j)}},[i,x,B]);let ie=d;d==="auto"&&!s.muiSupportAuto&&(ie=void 0);const ge=b||(i?W(ke(i)).body:void 0),Y={slots:S,slotProps:{...h,paper:y}},[_,q]=ne("paper",{elementType:at,externalForwardedProps:Y,additionalProps:{elevation:C,className:H(D.paper,y==null?void 0:y.className),style:v?y.style:{...y.style,opacity:0}},ownerState:$}),[ae,{slotProps:Re,...Te}]=ne("root",{elementType:wn,externalForwardedProps:Y,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:ge,open:x},ownerState:$,className:H(D.root,E)}),Ce=J(L,q.ref);return u.jsx(ae,{...Te,...!Ht(ae)&&{slotProps:Re,disableScrollLock:M},...R,ref:n,children:u.jsx(s,{appear:!0,in:x,onEntering:Ee,onExited:Pe,timeout:ie,...w,children:u.jsx(_,{...q,ref:Ce,children:g})})})});function kn(e){return oe("MuiMenu",e)}V("MuiMenu",["root","paper","list"]);const In={vertical:"top",horizontal:"right"},jn={vertical:"top",horizontal:"left"},Ln=e=>{const{classes:t}=e;return re({root:["root"],paper:["paper"],list:["list"]},kn,t)},Nn=K(Mn,{shouldForwardProp:e=>ot(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),$n=K(at,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Fn=K(Tn,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),On=c.forwardRef(function(t,n){const o=se({props:t,name:"MuiMenu"}),{autoFocus:r=!0,children:i,className:l,disableAutoFocusItem:a=!1,MenuListProps:m={},onClose:g,open:E,PaperProps:b={},PopoverClasses:C,transitionDuration:p="auto",TransitionProps:{onEntering:x,...k}={},variant:S="selectedMenu",slots:h={},slotProps:f={},...s}=o,d=kt(),P={...o,autoFocus:r,disableAutoFocusItem:a,MenuListProps:m,onEntering:x,PaperProps:b,transitionDuration:p,TransitionProps:k,variant:S},w=Ln(P),M=r&&!a&&E,R=c.useRef(null),y=(v,F)=>{R.current&&R.current.adjustStyleForScrollbar(v,{direction:d?"rtl":"ltr"}),x&&x(v,F)},L=v=>{v.key==="Tab"&&(v.preventDefault(),g&&g(v,"tabKeyDown"))};let $=-1;c.Children.map(i,(v,F)=>{c.isValidElement(v)&&(v.props.disabled||(S==="selectedMenu"&&v.props.selected||$===-1)&&($=F))});const D=h.paper??$n,A=f.paper??b,I=_e({elementType:h.root,externalSlotProps:f.root,ownerState:P,className:[w.root,l]}),T=_e({elementType:D,externalSlotProps:A,ownerState:P,className:w.paper});return u.jsx(Nn,{onClose:g,anchorOrigin:{vertical:"bottom",horizontal:d?"right":"left"},transformOrigin:d?In:jn,slots:{paper:D,root:h.root},slotProps:{root:I,paper:T},open:E,ref:n,transitionDuration:p,TransitionProps:{onEntering:y,...k},ownerState:P,...s,classes:C,children:u.jsx(Fn,{onKeyDown:L,actions:R,autoFocus:r&&($===-1||a),autoFocusItem:M,variant:S,...m,className:H(w.list,m.className),children:i})})});function Dn(e){return oe("MuiMenuItem",e)}const de=V("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),An=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},Bn=e=>{const{disabled:t,dense:n,divider:o,disableGutters:r,selected:i,classes:l}=e,m=re({root:["root",n&&"dense",t&&"disabled",!r&&"gutters",o&&"divider",i&&"selected"]},Dn,l);return{...l,...m}},_n=K(dt,{shouldForwardProp:e=>ot(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:An})(tt(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${de.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:xe(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${de.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:xe(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${de.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:xe(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:xe(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${de.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${de.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${Ge.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${Ge.inset}`]:{marginLeft:52},[`& .${Ye.root}`]:{marginTop:0,marginBottom:0},[`& .${Ye.inset}`]:{paddingLeft:36},[`& .${We.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${We.root} svg`]:{fontSize:"1.25rem"}}}]}))),Gn=c.forwardRef(function(t,n){const o=se({props:t,name:"MuiMenuItem"}),{autoFocus:r=!1,component:i="li",dense:l=!1,divider:a=!1,disableGutters:m=!1,focusVisibleClassName:g,role:E="menuitem",tabIndex:b,className:C,...p}=o,x=c.useContext(Ie),k=c.useMemo(()=>({dense:l||x.dense||!1,disableGutters:m}),[x.dense,l,m]),S=c.useRef(null);nt(()=>{r&&S.current&&S.current.focus()},[r]);const h={...o,dense:k.dense,divider:a,disableGutters:m},f=Bn(o),s=J(S,n);let d;return o.disabled||(d=b!==void 0?b:-1),u.jsx(Ie.Provider,{value:k,children:u.jsx(_n,{ref:s,role:E,tabIndex:d,component:i,focusVisibleClassName:H(f.focusVisible,g),className:H(f.root,C),...p,ownerState:h,classes:f})})}),Un=({category:e,setCategory:t})=>{const n=he(),{t:o}=Z();return u.jsx(U,{display:"flex",flexDirection:"column",flexGrow:1,children:It.map(r=>u.jsx(ye,{variant:r===e?"contained":"text",color:n,onClick:()=>t(r),children:o(`category_enum_short.${r}`)},r))})},Kn=me.memo(Un),zn=({game:e,setGame:t})=>{const n=he(),{t:o}=Z();return u.jsx(U,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:{xs:0,md:1},children:jt.map(r=>u.jsx(ye,{variant:r===e?"contained":"text",color:n,onClick:()=>t(r),children:o(`game_enum_short.${r}`)},r))})},Hn=me.memo(zn),Wn=({gender:e,setGender:t})=>{const n=he(),{t:o}=Z();return u.jsx(U,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:{xs:0,md:1},children:Lt.map(r=>u.jsx(ye,{variant:r===e?"contained":"text",color:n,onClick:()=>t(r),children:o(`gender_enum_short.${r}`)},r))})},Yn=me.memo(Wn),Vn=({year:e,category:t,game:n,gender:o})=>{const{t:r}=Z(),{getTournamentUrl:i}=Le(),l=c.useMemo(()=>r(`gender_category.${o}.${t}`),[o,t,r]),a=c.useMemo(()=>{const E=r(`game_enum.${n}`);return l?`${e} ${E} - ${l}`:`${e} ${E}`},[e,n,l,r]),m=c.useMemo(()=>r("description",{game:r(`game_enum2.${n}`),gender_category:r(`gender_category_full.${o}.${t}`),year:e}),[e,t,n,o,r]),g=c.useMemo(()=>i(e,t,n,o,!1),[e,t,n,o]);return u.jsx(Nt,{title:a,description:m,url:g})},qn=({result:e})=>{const{t,i18n:n}=Z(),{getPlayerUrl:o}=Le(),r=he(),i=(n.resolvedLanguage=="uk"?e.name_uk:e.name_en)||e.name_uk||e.name_en,l=[e.club,e.coach1,e.coach2,e.coach3].filter(Boolean).join(", ")||e.notes;return u.jsx(ut,{to:o(e.id),style:{textDecoration:"none",color:"inherit"},children:u.jsxs(U,{padding:2,gap:{xs:1,md:2},display:"flex",border:"1px solid #ddd",boxShadow:"0px 4px 6px rgba(63, 81, 181, 0.3)",bgcolor:e.rank<=3?"white":"",sx:{cursor:"pointer"},children:[u.jsx(U,{children:u.jsxs(z,{variant:"body1",children:[e.rank,"."]})}),u.jsxs(U,{flexGrow:1,children:[u.jsx(z,{variant:"body1",children:i}),l&&u.jsx(z,{variant:"body2",color:"textSecondary",paddingLeft:1,children:l})]}),u.jsxs(U,{children:[e.fed&&u.jsx(z,{variant:"body2",color:r,textAlign:"right",children:t(`federation_enum_short.${e.fed}`)}),e.points&&u.jsx(z,{variant:"body2",color:"textSecondary",textAlign:"right",children:e.points})]})]})})},Xn=({tournament:e})=>{var r;const{t,i18n:n}=Z(),o=u.jsx(z,{component:"h3",variant:"body2",color:"textSecondary",align:"center",sx:e.id&&e.id>=0?{"&:hover":{textDecoration:"underline"}}:{},children:[t(`type_enum.${e.type}`),n.resolvedLanguage==="uk"?e.location_uk:e.location_en,e.date||null].filter(Boolean).join(", ")});return u.jsxs(U,{display:"flex",flexDirection:"column",gap:1,children:[e.id&&e.id>=0?u.jsx(zt,{href:`https://chess-results.com/tnr${e.id}.aspx?art=1`,target:"_blank",rel:"noopener",style:{textDecoration:"none",color:"inherit"},children:o}):o,((e.round??0)>0&&(e.round??0)<(e.rounds||1/0)||e.missedResults)&&u.jsxs(z,{component:"h4",variant:"body2",color:"textSecondary",align:"center",children:[t("rankAfterRound",{round:e.round??0}),e.missedResults?` (${t("missingResults",{count:e.missedResults})})`:""]}),(r=e.results)==null?void 0:r.map((i,l)=>u.jsx(qn,{result:i},`${e.id}_${l}`))]})},Qn=({year:e,category:t,game:n,gender:o})=>{const{data:r,isLoading:i,error:l}=$t({queryKey:["tournaments",{year:e,category:t,game:n,gender:o}],queryFn:async()=>await Ot.getTournaments(e,t,n,o)});return u.jsxs(U,{display:"flex",flexDirection:"column",gap:{xs:1,md:2},flexGrow:1,marginBottom:4,sx:{overflow:"auto",height:"100%"},children:[i&&u.jsx(ft,{}),l&&u.jsx(Ft,{message:l.message}),!i&&!l&&r&&r.map((a,m)=>u.jsx(Xn,{tournament:a},`${e}_${m}`))]})};function ue(e){if(typeof window>"u")return e;const t=c.useRef(null);return c.useLayoutEffect(()=>{t.current=e}),c.useCallback((...n)=>{var o;(o=t.current)===null||o===void 0||o.call(t,...n)},[])}const Je={};function Jn(e,t){Je[e]||(Je[e]=!0,console.error("[material-ui-popup-state] WARNING",t))}const Zn={isOpen:!1,setAnchorElUsed:!1,anchorEl:void 0,anchorPosition:void 0,hovered:!1,focused:!1,_openEventType:null,_childPopupState:null,_deferNextOpen:!1,_deferNextClose:!1},Ze=pt,eo="useId"in Ze?()=>Ze.useId():()=>{};function to({parentPopupState:e,popupId:t=eo(),variant:n,disableAutoFocus:o}){const r=c.useRef(!0);c.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]);const[i,l]=c.useState(Zn),a=c.useCallback(f=>{r.current&&l(f)},[]),m=c.useCallback(f=>a(s=>({...s,setAnchorElUsed:!0,anchorEl:f??void 0})),[]),g=ue(f=>(i.isOpen?C(f):E(f),i)),E=ue(f=>{const s=f instanceof Element?void 0:f,d=f instanceof Element?f:(f==null?void 0:f.currentTarget)instanceof Element?f.currentTarget:void 0;if((s==null?void 0:s.type)==="touchstart"){a(y=>({...y,_deferNextOpen:!0}));return}const P=s==null?void 0:s.clientX,w=s==null?void 0:s.clientY,M=typeof P=="number"&&typeof w=="number"?{left:P,top:w}:void 0,R=y=>{if(!f&&!y.setAnchorElUsed&&n!=="dialog"&&Jn("missingEventOrAnchorEl","eventOrAnchorEl should be defined if setAnchorEl is not used"),e){if(!e.isOpen)return y;setTimeout(()=>e._setChildPopupState(h))}const L={...y,isOpen:!0,anchorPosition:M,hovered:(s==null?void 0:s.type)==="mouseover"||y.hovered,focused:(s==null?void 0:s.type)==="focus"||y.focused,_openEventType:s==null?void 0:s.type};return y.setAnchorElUsed||(s!=null&&s.currentTarget?L.anchorEl=s==null?void 0:s.currentTarget:d&&(L.anchorEl=d)),L};a(y=>y._deferNextOpen?(setTimeout(()=>a(R),0),{...y,_deferNextOpen:!1}):R(y))}),b=f=>{const{_childPopupState:s}=f;return setTimeout(()=>{s==null||s.close(),e==null||e._setChildPopupState(null)}),{...f,isOpen:!1,hovered:!1,focused:!1}},C=ue(f=>{const s=f instanceof Element?void 0:f;if((s==null?void 0:s.type)==="touchstart"){a(d=>({...d,_deferNextClose:!0}));return}a(d=>d._deferNextClose?(setTimeout(()=>a(b),0),{...d,_deferNextClose:!1}):b(d))}),p=c.useCallback((f,s)=>{f?E(s):C(s)},[]),x=ue(f=>{const{relatedTarget:s}=f;a(d=>d.hovered&&!(s instanceof Element&&je(s,h))?d.focused?{...d,hovered:!1}:b(d):d)}),k=ue(f=>{if(!f)return;const{relatedTarget:s}=f;a(d=>d.focused&&!(s instanceof Element&&je(s,h))?d.hovered?{...d,focused:!1}:b(d):d)}),S=c.useCallback(f=>a(s=>({...s,_childPopupState:f})),[]),h={...i,setAnchorEl:m,popupId:t??void 0,variant:n,open:E,close:C,toggle:g,setOpen:p,onBlur:k,onMouseLeave:x,disableAutoFocus:o??!!(i.hovered||i.focused),_setChildPopupState:S};return h}function no({isOpen:e,popupId:t,variant:n}){return{...n==="popover"?{"aria-haspopup":!0,"aria-controls":e?t:void 0}:n==="popper"?{"aria-describedby":e?t:void 0}:void 0}}function oo(e){return{...no(e),onClick:e.open,onTouchStart:e.open}}function so({isOpen:e,anchorEl:t,anchorPosition:n,close:o,popupId:r,onMouseLeave:i,disableAutoFocus:l,_openEventType:a}){return{id:r,anchorEl:t,anchorPosition:n,anchorReference:a==="contextmenu"?"anchorPosition":"anchorEl",open:e,onClose:o,onMouseLeave:i,...l&&{autoFocus:!1,disableAutoFocusItem:!0,disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0}}}function ro(e,{popupId:t}){if(!t)return null;const n=typeof e.getRootNode=="function"?e.getRootNode():document;return typeof n.getElementById=="function"?n.getElementById(t):null}function je(e,t){const{anchorEl:n,_childPopupState:o}=t;return et(n,e)||et(ro(e,t),e)||o!=null&&je(e,o)}function et(e,t){if(!e)return!1;for(;t;){if(t===e)return!0;t=t.parentElement}return!1}function lt({children:e,popupId:t,variant:n,parentPopupState:o,disableAutoFocus:r}){const i=to({popupId:t,variant:n,parentPopupState:o,disableAutoFocus:r}),l=e(i);return l??null}lt.propTypes={children:le.func.isRequired,popupId:le.string,variant:le.oneOf(["popover","popper"]).isRequired,parentPopupState:le.object,disableAutoFocus:le.bool};const io=({year:e,setYear:t})=>{const n=he();return u.jsx(lt,{variant:"popover",popupId:"year-menu",children:o=>u.jsxs(me.Fragment,{children:[u.jsx(ye,{variant:"contained",color:n,...oo(o),children:e}),u.jsx(On,{...so(o),children:fe.map(r=>u.jsx(Gn,{selected:r===e,onClick:()=>{o.close(),setTimeout(()=>{t(r)},50)},children:r},r))})]})})},ao=me.memo(io),mo=()=>{const[e]=mt(),{navigateToTournament:t}=Le(),{t:n}=Z(),o=parseInt(e.get("year")||"")||Dt,r=Se.stringToEnum(e.get("category"),Et)||At,i=Se.stringToEnum(e.get("game"),Pt)||Bt,l=Se.stringToEnum(e.get("gender"),Rt)||_t,[a,m]=c.useState(o),[g,E]=c.useState(r),[b,C]=c.useState(i),[p,x]=c.useState(l),k=c.useRef(null),S=c.useMemo(()=>n(`gender_category.${p}.${g}`),[g,p,n]);c.useEffect(()=>{(o!=a||r!=g||i!=b||l!=p)&&t(a,g,b,p,!0)},[a,g,b,p]);const h=c.useCallback(f=>{var s,d;(d=(s=k.current)==null?void 0:s.swiper)==null||d.slideToLoop(fe.indexOf(f))},[]);return u.jsxs(u.Fragment,{children:[u.jsx(Vn,{year:a,category:g,game:b,gender:p}),u.jsx(Gt,{gender:p,children:u.jsxs(be,{container:!0,spacing:{xs:1,md:2},padding:2,overflow:"hidden",height:"100%",children:[u.jsxs(be,{container:!0,direction:"column",gap:{xs:1,md:2},size:"auto",overflow:"auto",children:[u.jsx(ao,{year:a,setYear:h}),u.jsx(Kn,{category:g,setCategory:E}),u.jsx(Ut,{})]}),u.jsxs(be,{container:!0,direction:"column",size:"grow",overflow:"hidden",height:"100%",children:[u.jsx(Yn,{gender:p,setGender:x}),u.jsx(be,{size:"grow",overflow:"hidden",height:"100%",children:u.jsx(gt,{ref:k,direction:"horizontal",initialSlide:fe.indexOf(a),loop:!0,spaceBetween:10,slidesPerView:1,style:{width:"100%",height:"100%"},pagination:{clickable:!1},keyboard:{enabled:!0},onSlideChange:f=>{m(fe[f.realIndex])},virtual:{enabled:!0},modules:[xt,bt,vt],children:fe.map(f=>u.jsx(yt,{"aria-hidden":a!==f,children:u.jsxs(U,{display:"flex",flexDirection:"column",gap:{xs:1,md:2},overflow:"hidden",height:"100%",children:[u.jsxs(U,{children:[u.jsxs(z,{variant:"h5",component:"h1",align:"center",children:[n(`game_enum.${b}`)," ",f]}),u.jsx(z,{variant:"h6",component:"h2",align:"center",color:"textSecondary",children:S})]}),u.jsx(Qn,{year:f,category:g,game:b,gender:p})]})},f))})}),u.jsx(Hn,{game:b,setGame:C})]})]})})]})};export{mo as default};
