const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/progress-CTF_-L3b.js","assets/about-DSTax99k.js","assets/clubs-D3aanenO.js","assets/results-CZar-Mdc.js"])))=>i.map(i=>d[i]);
import{j as e,B as n,T as a,n as P,R as _,L as E,D as T,r as u,w as R,l as B,m as v}from"./about-DSTax99k.js";import{a as m,b,D as L,g,R as j,T as C,S as N,u as D,p as U,c as F,H as k,r as A,F as z}from"./clubs-D3aanenO.js";const G="modulepreload",H=function(r){return"/"+r},$={},O=function(o,l,p){let c=Promise.resolve();if(l&&l.length>0){let d=function(x){return Promise.all(x.map(h=>Promise.resolve(h).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),t=s?.nonce||s?.getAttribute("nonce");c=d(l.map(x=>{if(x=H(x),x in $)return;$[x]=!0;const h=x.endsWith(".css"),y=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${y}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":G,h||(f.as="script"),f.crossOrigin="",f.href=x,t&&f.setAttribute("nonce",t),document.head.appendChild(f),h)return new Promise((w,S)=>{f.addEventListener("load",w),f.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${x}`)))})}))}function i(s){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=s,window.dispatchEvent(t),!t.defaultPrevented)throw s}return c.then(s=>{for(const t of s||[])t.status==="rejected"&&i(t.reason);return o().catch(i)})},W=({data:r})=>{const{getFederationUrl:o,getClubUrl:l,getCoachUrl:p}=m(),{t:c}=b(),i=L.currentYear();return e.jsxs(n,{display:"flex",sx:{flexDirection:{xs:"column",md:"row"},gap:4},children:[r.photo&&e.jsx(n,{display:"flex",justifyContent:"center",children:e.jsx(n,{component:"img",src:r.photo,alt:g(r),sx:{width:150,height:150,objectFit:"cover",borderRadius:"50%",boxShadow:2}})}),e.jsxs(n,{display:"flex",flexDirection:"column",flex:1,children:[r.id&&r.id>0&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(a,{variant:"body1",children:[c("fide"),":"]})}),e.jsx(n,{flexBasis:"50%",children:e.jsx(P,{href:`https://ratings.fide.com/profile/${r.id}`,variant:"body1",target:"_blank",rel:"noopener",children:r.id})})]}),r.yob&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(a,{variant:"body1",children:[c("year_of_birth"),":"]})}),e.jsxs(n,{display:"flex",flexBasis:"50%",gap:1,children:[e.jsx(a,{variant:"body1",children:r.yob}),e.jsx(a,{variant:"body1",color:"textSecondary",children:`(${i-r.yob} ${c("years")})`})]})]}),r.fed&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(a,{variant:"body1",children:[c("federation"),":"]})}),e.jsxs(n,{display:"flex",flexBasis:"50%",gap:1,children:[e.jsx(j,{to:o(r.fed),children:c(`federation_enum_short.${r.fed}`)}),r.fed2&&e.jsxs(e.Fragment,{children:[e.jsx(a,{variant:"body1",color:"textSecondary",children:"/"}),e.jsx(a,{variant:"body1",color:"textSecondary",children:g(r.fed2)})]})]})]}),r.clubs&&r.clubs.length>0&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(a,{variant:"body1",children:[c("club",{count:r.clubs.length}),":"]})}),e.jsx(n,{flexBasis:"50%",display:"flex",flexDirection:"column",children:r.clubs.map((s,t)=>{const d=g(s);return s.id?e.jsx(n,{alignSelf:"flex-start",children:e.jsx(j,{to:l(Number(s.id)),children:d})},t):e.jsx(a,{variant:"body1",children:d},t)})})]}),r.coaches&&r.coaches.length>0&&e.jsxs(n,{display:"flex",children:[e.jsx(n,{flexBasis:"50%",children:e.jsxs(a,{variant:"body1",children:[c("coach",{count:r.coaches.length}),":"]})}),e.jsx(n,{flexBasis:"50%",display:"flex",flexDirection:"column",children:r.coaches.map((s,t)=>{const d=g(s);return s.id?e.jsx(n,{alignSelf:"flex-start",children:e.jsx(j,{to:p(Number(s.id)),children:d})},t):e.jsx(a,{variant:"body1",children:d},t)})})]})]})]})},q=({results:r,yob:o})=>{const{t:l}=b(),{getTournamentUrl:p}=m(),c=(i,s,t,d,x)=>{const h=l(`type_enum_short.${i}`),y=l(`game_enum_short.${d}`),f=l(`gender_category.${x}.${t}`);return f?`${h} ${s} ${y} - ${f}`:`${h} ${s} ${y}`};return e.jsx(e.Fragment,{children:[...new Set(r.map(i=>i.rank))].map(i=>e.jsxs(n,{display:"flex",padding:2,gap:1,border:"1px solid #ddd",boxShadow:"0px 4px 6px rgba(63, 81, 181, 0.3)",bgcolor:i===1?"#ffffff":i===2?"#fcfcfc":i===3?"#f7f7f7":i===4?"#ededed":i===5?"#e5e5e5":"transparent",children:[e.jsx(n,{flexGrow:"auto",children:e.jsxs(a,{variant:"body1",children:[i,"."]})}),e.jsx(n,{flex:1,children:r.filter(s=>s.rank===i).map((s,t,d)=>e.jsxs(_.Fragment,{children:[e.jsx(E,{to:p(s.year,s.category,s.game,s.gender),style:{textDecoration:"none",color:"inherit"},children:e.jsxs(n,{display:"flex",flexDirection:"row",gap:1,sx:{"&:hover":{backgroundColor:"#f9f9f9"},borderRadius:"4px"},children:[e.jsx(n,{flexGrow:1,children:e.jsx(a,{variant:"body1",sx:{"&:hover":{textDecoration:"underline"}},color:s.type==C.UC?"textPrimary":"primary",children:c(s.type,s.year,s.category,s.game,s.gender)},"title")}),e.jsx(n,{children:e.jsx(a,{variant:"body1",color:"textSecondary",sx:{whiteSpace:"nowrap"},children:`${o?` ${s.year-o} ${l("years")}`:""}`},"year")})]})}),t<d.length-1&&e.jsx(T,{sx:{my:1}})]},t))})]},i))})},I="/",M={async get(r){const o=N.encode(r.toString()),l=await fetch(`${I}api/players/${o}.json?v=1187491`);if(!l.ok)throw new Error(`Failed to get player (id=${r}) data`);return await l.json()}},Y=u.lazy(()=>O(()=>import("./progress-CTF_-L3b.js"),__vite__mapDeps([0,1,2,3])));async function J({params:r}){return await M.get(Number(r.id))}const K=({params:r,loaderData:o})=>{const l=Number(r.id),[p,c]=D("tab",U.withDefault(0)),{getPlayerUrl:i}=m(),{t:s}=b(),t=u.useMemo(()=>g(o),[o]),d=u.useCallback((x,h)=>c(h),[c]);return e.jsxs(e.Fragment,{children:[e.jsx(F,{title:t,description:s("player_description"),url:i(l,!1)}),e.jsxs(n,{display:"flex",flexDirection:"column",padding:2,gap:1,boxSizing:"border-box",minHeight:"100vh",children:[e.jsx(k,{title:t}),e.jsx(W,{data:o}),e.jsxs(B,{value:p,onChange:d,children:[e.jsx(v,{label:s("results"),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),e.jsx(v,{label:s("progress"),sx:{minWidth:0,paddingRight:0,paddingLeft:0}})]}),e.jsxs(n,{display:"flex",flexDirection:"column",flexGrow:1,gap:1,children:[p===0&&e.jsx(q,{results:o.results,yob:o.yob}),p===1&&e.jsx(n,{width:"100%",height:400,children:e.jsx(u.Suspense,{fallback:e.jsx(A,{height:"100%"}),children:e.jsx(Y,{results:o.results,yob:o.yob})})})]}),e.jsx(z,{})]})]})},X=R(K);export{X as P,J as c};
