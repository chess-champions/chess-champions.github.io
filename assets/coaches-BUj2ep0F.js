import{R as v,r as l,j as e,B as i,T as c,n as C,l as k,m as p,w as R}from"./about-hFlrwFyx.js";import{u as w,p as F,a as g,b as m,D as S,H as T,R as B,F as L,c as $,g as j,S as M,d as E}from"./clubs-BMotTmGw.js";import{M as u,R as d}from"./results-DCa1EYNz.js";function P({data:s}){const[t,o]=w("tab",F.withDefault(0)),{getFederationUrl:x}=g(),{t:n,i18n:a}=m(),r=l.useMemo(()=>(a.resolvedLanguage==="uk"?s?.name_uk:s?.name_en)||s?.name_uk||s?.name_en||"",[s,a.resolvedLanguage]),h=l.useMemo(()=>n("coach_title",{name:r}),[n,r]),f=()=>{$.event("external_link_click",{link_type:"fide_profile",type:"coach",id:s.id,name:j(s)})},y=l.useCallback((H,_)=>{o(_)},[o]),b=S.currentYear();return e.jsxs(i,{display:"flex",flexDirection:"column",padding:2,gap:1,boxSizing:"border-box",minHeight:"100vh",children:[e.jsx(T,{title:h}),e.jsxs(i,{display:"flex",sx:{flexDirection:{xs:"column",md:"row"},gap:4},children:[s.photo&&e.jsx(i,{display:"flex",justifyContent:"center",children:e.jsx(i,{component:"img",src:s.photo,alt:r,sx:{width:150,height:150,objectFit:"cover",borderRadius:"50%",boxShadow:2}})}),e.jsxs(i,{display:"flex",flexDirection:"column",flex:1,children:[s.id&&s.id>0&&e.jsxs(i,{display:"flex",children:[e.jsx(i,{flexBasis:"50%",children:e.jsxs(c,{variant:"body1",children:[n("fide"),":"]})}),e.jsx(i,{flexBasis:"50%",children:e.jsx(C,{href:`https://ratings.fide.com/profile/${s.id}`,onClick:f,variant:"body1",target:"_blank",rel:"noopener",children:s.id})})]}),s.yob&&e.jsxs(i,{display:"flex",children:[e.jsx(i,{flexBasis:"50%",children:e.jsxs(c,{variant:"body1",children:[n("year_of_birth"),":"]})}),e.jsxs(i,{display:"flex",flexBasis:"50%",gap:1,children:[e.jsx(c,{variant:"body1",children:s.yob}),e.jsx(c,{variant:"body1",color:"textSecondary",children:`(${b-s.yob} ${n("years")})`})]})]}),s.fed&&e.jsxs(i,{display:"flex",children:[e.jsx(i,{flexBasis:"50%",children:e.jsxs(c,{variant:"body1",children:[n("federation"),":"]})}),e.jsx(i,{flexBasis:"50%",children:e.jsx(B,{to:x(s.fed),children:n(`federation_enum_short.${s.fed}`)})})]})]})]}),e.jsxs(k,{value:t,onChange:y,children:[e.jsx(p,{label:n("results"),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),e.jsx(p,{label:n("player",{count:2}),sx:{minWidth:0,paddingRight:0,paddingLeft:0}})]}),e.jsxs(i,{display:"flex",flexGrow:1,children:[t===0&&e.jsx(u,{filterField:d.Coach,filterId:s.id,groupField:d.Year,results:s.years}),t===1&&e.jsx(u,{filterField:d.Coach,filterId:s.id,groupField:d.Player,results:s.players})]}),e.jsx(L,{})]})}const D=v.memo(P),N="/",A={async get(s){const t=M.encode(s.toString()),o=await fetch(`${N}api/coaches/${t}.json?v=5dcee18`);if(!o.ok)throw new Error(`Failed to get coach (id=${s}) data`);return await o.json()}};async function z({params:s}){return await A.get(Number(s.id))}const G=R(function({params:t,loaderData:o}){const x=Number(t.id),{getCoachUrl:n}=g(),{t:a}=m(),r=l.useMemo(()=>j(o),[o]),h=l.useMemo(()=>a("coach_title",{name:r}),[a,r]),f=l.useMemo(()=>a("coach_description",{name:r}),[a,r]);return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:h,description:f,url:n(x,!1)}),e.jsx(D,{data:o})]})});export{G as C,z as c};
