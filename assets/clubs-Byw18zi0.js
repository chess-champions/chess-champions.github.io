import{j as s,B as x,a as F,b as m}from"./mui-CXhE_iE7.js";import{r as l,a as f}from"./react-Bs57X6Ch.js";import{S as L,u as h,p as j,H as _,F as v,a as R,b as S,E as p,L as E,c as k}from"./shared-Bj1o6Vv6.js";import{u as M}from"./query-DeXAFL7x.js";import{M as d,R as o}from"./results-XOvaswP5.js";import{u as C}from"./localization-BTb5j_W4.js";import"./analytics-HyNrjKFN.js";import"./utils-BT3gc4jm.js";const w="/",T={async getClub(e){const a=L.encode(e.toString()),n=await fetch(`${w}api/clubs/${a}.json?v=ba5969a`);if(!n.ok)throw new Error(`Failed to get club (id=${e}) data`);return await n.json()}},y=({data:e})=>{const[a,n]=h("tab",j.withDefault(0)),{t,i18n:r}=C(),u=l.useMemo(()=>(r.resolvedLanguage==="uk"?e?.name_uk:e?.name_en)||e?.name_uk||e?.name_en||"",[e,r.resolvedLanguage]),c=l.useMemo(()=>t("club_title",{name:u}),[t,u]),i=l.useCallback((b,g)=>{n(g)},[n]);return s.jsxs(x,{display:"flex",flexDirection:"column",padding:2,gap:1,boxSizing:"border-box",minHeight:"100vh",children:[s.jsx(_,{title:c}),s.jsxs(F,{value:a,onChange:i,children:[s.jsx(m,{label:t("results"),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),s.jsx(m,{label:t("coach",{count:2}),sx:{minWidth:0,paddingRight:0,paddingLeft:0,marginRight:1}}),s.jsx(m,{label:t("player",{count:2}),sx:{minWidth:0,paddingRight:0,paddingLeft:0}})]}),s.jsxs(x,{display:"flex",flexGrow:1,children:[a===0&&s.jsx(d,{filterField:o.Club,filterId:e.id,groupField:o.Year,results:e.years}),a===1&&s.jsx(d,{filterField:o.Club,filterId:e.id,groupField:o.Coach,results:e.coaches}),a===2&&s.jsx(d,{filterField:o.Club,filterId:e.id,groupField:o.Player,results:e.players})]}),s.jsx(v,{})]})};f.memo(y);const I=({id:e})=>{const{getClubUrl:a}=R(),{t:n,i18n:t}=C(),{data:r,isLoading:u,error:c}=M({queryKey:["clubs",{id:e}],queryFn:async()=>await T.getClub(e),enabled:!!e}),i=l.useMemo(()=>(t.resolvedLanguage==="uk"?r?.name_uk:r?.name_en)||r?.name_uk||r?.name_en||"",[r,t.resolvedLanguage]),b=l.useMemo(()=>n("club_title",{name:i}),[n,i]),g=l.useMemo(()=>n("club_description",{name:i}),[n,i]);if(!e)return s.jsxs(s.Fragment,{children:[s.jsx(S,{}),s.jsx(p,{message:"Club is missing."})]});if(c)return s.jsx(p,{message:c.message});if(u)return s.jsx(E,{});if(r)return s.jsxs(s.Fragment,{children:[s.jsx(k,{title:b,description:g,url:a(e,!1)}),s.jsx(y,{data:r})]})},$=f.memo(I),O=()=>{const[e]=h("id",j);return s.jsx($,{id:e})};export{O as ClubPage};
