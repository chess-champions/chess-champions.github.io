import{r as g,n as f,j as e,B as a,p as b,T as y,R as u,t as w}from"./index-DpiG-e0f.js";import{S as v,K as S,P as T,V as I,a as D}from"./swiper-react-B37vIM9g.js";import{I as E,R as Y,H as k,F as z}from"./RouterLink-CcJquxk2.js";import{i as B,E as F,j as R,D as P,S as C,Y as h}from"./ChessDataService-BXnD00Lw.js";import{K as $,a as K,C as A,Y as L}from"./YearFederationResultList-BkzEfznj.js";import{u as p}from"./useNavigationService-Bn7jlWuO.js";import{T as _,a as U,b as H,c as m,d as i,e as O}from"./TableRow-Duaec0hi.js";import{P as V}from"./Paper-ByZ-e39v.js";import"./Divider-Dc7tGIpq.js";const q=({id:o})=>{var j;const[t,x]=g.useState(null),{getFederationUrl:d}=p(),{t:n}=f(),{data:r,isLoading:c,error:l}=B({queryKey:["years",{id:o}],queryFn:async()=>await R.getYear(o)});return e.jsxs(a,{display:"flex",flexDirection:"column",flexGrow:"grow",marginBottom:4,sx:{overflow:"auto",height:"100%"},children:[c&&e.jsx(b,{}),l&&e.jsx(F,{message:l.message}),!c&&!l&&r&&e.jsx(_,{component:V,children:e.jsxs(U,{size:"small",children:[e.jsx(H,{children:e.jsxs(m,{children:[e.jsx(i,{}),e.jsx(i,{children:"#"}),e.jsx(i,{align:"left",children:e.jsx(y,{children:n("federation")})}),e.jsx(i,{children:e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(a,{sx:{display:{xs:"none",sm:"block"}},children:n("gold")}),e.jsx("img",{alt:n("gold"),width:"16",height:"16",src:"/gold.svg"})]})}),e.jsx(i,{children:e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(a,{sx:{display:{xs:"none",sm:"block"}},children:n("silver")}),e.jsx("img",{alt:n("silver"),width:"16",height:"16",src:"/silver.svg"})]})}),e.jsx(i,{children:e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(a,{sx:{display:{xs:"none",sm:"block"}},children:n("bronze")}),e.jsx("img",{alt:n("bronze"),width:"16",height:"16",src:"/bronze.svg"})]})}),e.jsx(i,{children:e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(a,{sx:{display:{xs:"none",sm:"block"}},children:n("total")}),e.jsx("img",{alt:n("total"),width:"16",height:"16",src:"/total.svg"})]})})]})}),e.jsx(O,{children:(j=r.results)==null?void 0:j.map(s=>e.jsxs(u.Fragment,{children:[e.jsxs(m,{sx:{"& td":{borderBottom:"none"}},children:[e.jsx(i,{children:e.jsx(a,{display:"flex",alignItems:"center",children:e.jsx(E,{sx:{padding:"0px"},size:"small",onClick:()=>x(s.fed===t?null:s.fed),children:s.fed===t?e.jsx($,{}):e.jsx(K,{})})})}),e.jsxs(i,{align:"left",children:[s.rank,"."]}),e.jsx(i,{children:s.fed&&e.jsx(Y,{to:d(s.fed),children:n(`federation_enum_short.${s.fed}`)})}),e.jsx(i,{align:"center",children:s.gold||0}),e.jsx(i,{align:"center",children:s.silver||0}),e.jsx(i,{align:"center",children:s.bronze||0}),e.jsx(i,{align:"center",children:(s.gold||0)+(s.silver||0)+(s.bronze||0)})]}),e.jsx(m,{children:e.jsx(i,{style:{paddingBottom:0,paddingTop:0},colSpan:7,children:e.jsx(A,{in:s.fed===t,timeout:"auto",unmountOnExit:!0,children:e.jsx(a,{marginTop:1,marginBottom:2,children:e.jsx(L,{year:o,federation:s.fed})})})})})]},`${o}_${s.fed}`))})]})})]})},se=()=>{const[o]=w(),{getYearUrl:t,navigateToYear:x}=p(),{t:d}=f(),n=parseInt(o.get("id")||"")||P,[r,c]=g.useState(n);return g.useEffect(()=>{n!=r&&x(r,!0)},[r]),e.jsxs(e.Fragment,{children:[e.jsx(C,{title:`${r} - ${d("medals_table")}`,description:d("year_description",{year:r}),url:t(r,!1)}),e.jsxs(a,{display:"flex",flexDirection:"column",height:"100vh",padding:2,gap:1,boxSizing:"border-box",overflow:"hidden",children:[e.jsx(k,{title:`${r} ${d("medals_table")}`}),e.jsx(a,{display:"flex",flexGrow:1,overflow:"hidden",height:"100%",children:e.jsx(v,{direction:"horizontal",initialSlide:h.indexOf(r),loop:!0,spaceBetween:10,slidesPerView:1,style:{width:"100%",height:"100%"},pagination:{clickable:!1},keyboard:{enabled:!0},onSlideChange:l=>{c(h[l.realIndex])},virtual:{enabled:!0},modules:[S,T,I],children:h.map(l=>e.jsx(D,{"aria-hidden":r!==l,children:e.jsx(a,{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%",children:e.jsx(q,{id:l})})},l))})}),e.jsx(z,{})]})]})};export{se as default};
